"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } } function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; } async function _asyncOptionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = await fn(value); } else if (op === 'call' || op === 'optionalCall') { value = await fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var si=Object.defineProperty;var ai=Object.getOwnPropertyDescriptor;var O=(n,t,e,r)=>{for(var o=r>1?void 0:r?ai(t,e):t,i=n.length-1,s;i>=0;i--)(s=n[i])&&(o=(r?s(t,e,o):s(o))||o);return r&&o&&si(t,e,o),o};var J=class extends Error{constructor(e,r,o){super(o);this.name="AptosApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.data=r.data,this.request=e}};var Jn="0.0.4";var fn=(r=>(r.JSON="application/json",r.BCS="application/x-bcs",r.BCS_SIGNED_TRANSACTION="application/x.aptos.signed_transaction+bcs",r))(fn||{}),er= exports.TypeTagVariants =(g=>(g[g.Bool=0]="Bool",g[g.U8=1]="U8",g[g.U64=2]="U64",g[g.U128=3]="U128",g[g.Address=4]="Address",g[g.Signer=5]="Signer",g[g.Vector=6]="Vector",g[g.Struct=7]="Struct",g[g.U16=8]="U16",g[g.U32=9]="U32",g[g.U256=10]="U256",g[g.Reference=254]="Reference",g[g.Generic=255]="Generic",g))(er||{}),st= exports.ScriptTransactionArgumentVariants =(d=>(d[d.U8=0]="U8",d[d.U64=1]="U64",d[d.U128=2]="U128",d[d.Address=3]="Address",d[d.U8Vector=4]="U8Vector",d[d.Bool=5]="Bool",d[d.U16=6]="U16",d[d.U32=7]="U32",d[d.U256=8]="U256",d))(st||{}),tr= exports.TransactionPayloadVariants =(r=>(r[r.Script=0]="Script",r[r.EntryFunction=2]="EntryFunction",r[r.Multisig=3]="Multisig",r))(tr||{}),nr= exports.TransactionVariants =(e=>(e[e.MultiAgentTransaction=0]="MultiAgentTransaction",e[e.FeePayerTransaction=1]="FeePayerTransaction",e))(nr||{}),rr= exports.TransactionAuthenticatorVariant =(i=>(i[i.Ed25519=0]="Ed25519",i[i.MultiEd25519=1]="MultiEd25519",i[i.MultiAgent=2]="MultiAgent",i[i.FeePayer=3]="FeePayer",i[i.SingleSender=4]="SingleSender",i))(rr||{}),or= exports.AccountAuthenticatorVariant =(o=>(o[o.Ed25519=0]="Ed25519",o[o.MultiEd25519=1]="MultiEd25519",o[o.SingleKey=2]="SingleKey",o[o.MultiKey=3]="MultiKey",o))(or||{}),ir= exports.AnyPublicKeyVariant =(e=>(e[e.Ed25519=0]="Ed25519",e[e.Secp256k1=1]="Secp256k1",e))(ir||{}),sr= exports.AnySignatureVariant =(e=>(e[e.Ed25519=0]="Ed25519",e[e.Secp256k1=1]="Secp256k1",e))(sr||{}),An= exports.TransactionResponseType =(i=>(i.Pending="pending_transaction",i.User="user_transaction",i.Genesis="genesis_transaction",i.BlockMetadata="block_metadata_transaction",i.StateCheckpoint="state_checkpoint_transaction",i))(An||{}),ci= exports.MoveFunctionVisibility =(r=>(r.PRIVATE="private",r.PUBLIC="public",r.FRIEND="friend",r))(ci||{}),ui= exports.MoveAbility =(o=>(o.STORE="store",o.DROP="drop",o.KEY="key",o.COPY="copy",o))(ui||{}),di= exports.RoleType =(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(di||{}),at= exports.SigningScheme =(o=>(o[o.Ed25519=0]="Ed25519",o[o.MultiEd25519=1]="MultiEd25519",o[o.SingleKey=2]="SingleKey",o[o.MultiKey=3]="MultiKey",o))(at||{}),ar= exports.SigningSchemeInput =(e=>(e[e.Ed25519=0]="Ed25519",e[e.Secp256k1Ecdsa=2]="Secp256k1Ecdsa",e))(ar||{}),pi= exports.DeriveScheme =(i=>(i[i.DeriveAuid=251]="DeriveAuid",i[i.DeriveObjectAddressFromObject=252]="DeriveObjectAddressFromObject",i[i.DeriveObjectAddressFromGuid=253]="DeriveObjectAddressFromGuid",i[i.DeriveObjectAddressFromSeed=254]="DeriveObjectAddressFromSeed",i[i.DeriveResourceAccountAddress=255]="DeriveResourceAccountAddress",i))(pi||{});var cr={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function li(n,t){let{url:e,method:r,body:o,contentType:i,params:s,overrides:a}=n,c={..._optionalChain([a, 'optionalAccess', _2 => _2.HEADERS]),"x-aptos-client":`aptos-ts-sdk/${Jn}`,"content-type":_nullishCoalesce(i, () => ("application/json"))};return _optionalChain([a, 'optionalAccess', _3 => _3.AUTH_TOKEN])&&e.includes("faucet")&&(c.Authorization=`Bearer ${_optionalChain([a, 'optionalAccess', _4 => _4.AUTH_TOKEN])}`),_optionalChain([a, 'optionalAccess', _5 => _5.API_KEY])&&!e.includes("faucet")&&(c.Authorization=`Bearer ${_optionalChain([a, 'optionalAccess', _6 => _6.API_KEY])}`),t.provider({url:e,method:r,body:o,params:s,headers:c,overrides:a})}async function zt(n,t){let{url:e,path:r}=n,o=`${e}/${_nullishCoalesce(r, () => (""))}`,i=await li({...n,url:o},t.client),s={status:i.status,statusText:i.statusText,data:i.data,headers:i.headers,config:i.config,request:i.request,url:o};if(t.isIndexerRequest(e)){let c=s.data;if(c.errors)throw new J(n,s,_nullishCoalesce(c.errors[0].message, () => (`Unhandled Error ${i.status} : ${i.statusText}`)));s.data=c.data}if(s.status>=200&&s.status<300)return s;let a;throw s&&s.data&&"message"in s.data&&"error_code"in s.data?a=JSON.stringify(s.data):s.status in cr?a=cr[s.status]:a=`Unhandled Error ${s.status} : ${s.statusText}`,new J(n,s,a)}var hn={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},ur= exports.NetworkToNodeAPI ={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},dr= exports.NetworkToFaucetAPI ={mainnet:"https://faucet.mainnet.aptoslabs.com",testnet:"https://faucet.testnet.aptoslabs.com",devnet:"https://faucet.devnet.aptoslabs.com",local:"http://127.0.0.1:8081"},kt= exports.Network =(i=>(i.MAINNET="mainnet",i.TESTNET="testnet",i.DEVNET="devnet",i.LOCAL="local",i.CUSTOM="custom",i))(kt||{}),Tn= exports.NetworkToChainId ={mainnet:1,testnet:2},ls= exports.NetworkToNetworkName ={mainnet:"mainnet",testnet:"testnet",devnet:"devnet",local:"local",custom:"custom"};var Nt=(r=>(r[r.FULLNODE=0]="FULLNODE",r[r.INDEXER=1]="INDEXER",r[r.FAUCET=2]="FAUCET",r))(Nt||{}),pr= exports.DEFAULT_NETWORK ="devnet",lr= exports.DEFAULT_MAX_GAS_AMOUNT =2e5,gr= exports.DEFAULT_TXN_EXP_SEC_FROM_NOW =20,Ot= exports.DEFAULT_TXN_TIMEOUT_SEC =20,mr= exports.APTOS_COIN ="0x1::aptos_coin::AptosCoin",yr= exports.RAW_TRANSACTION_SALT ="APTOS::RawTransaction",bn= exports.RAW_TRANSACTION_WITH_DATA_SALT ="APTOS::RawTransactionWithData",ke= exports.ProcessorType =(d=>(d.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",d.COIN_PROCESSOR="coin_processor",d.DEFAULT="default_processor",d.EVENTS_PROCESSOR="events_processor",d.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",d.STAKE_PROCESSOR="stake_processor",d.TOKEN_PROCESSOR="token_processor",d.TOKEN_V2_PROCESSOR="token_v2_processor",d.USER_TRANSACTION_PROCESSOR="user_transaction_processor",d))(ke||{});async function gi(n){let{aptosConfig:t,overrides:e,params:r,contentType:o,acceptType:i,path:s,originMethod:a,type:c}=n,d=t.getRequestUrl(c);return zt({url:d,method:"GET",originMethod:a,path:s,contentType:_optionalChain([o, 'optionalAccess', _7 => _7.valueOf, 'call', _8 => _8()]),acceptType:_optionalChain([i, 'optionalAccess', _9 => _9.valueOf, 'call', _10 => _10()]),params:r,overrides:{...t.clientConfig,...e}},t)}async function M(n){return gi({...n,type:0})}async function Ne(n){let t=[],e,r=n.params;for(;;){r.start=e;let o=await M({aptosConfig:n.aptosConfig,originMethod:n.originMethod,path:n.path,params:r,overrides:n.overrides});if(e=o.headers["x-aptos-cursor"],delete o.headers,t.push(...o.data),e==null)break}return t}async function _n(n){let{type:t,originMethod:e,path:r,body:o,acceptType:i,contentType:s,params:a,aptosConfig:c,overrides:d}=n,y=c.getRequestUrl(t);return zt({url:y,method:"POST",originMethod:e,path:r,body:o,contentType:_optionalChain([s, 'optionalAccess', _11 => _11.valueOf, 'call', _12 => _12()]),acceptType:_optionalChain([i, 'optionalAccess', _13 => _13.valueOf, 'call', _14 => _14()]),params:a,overrides:{...c.clientConfig,...d}},c)}async function Oe(n){return _n({...n,type:0})}async function fr(n){return _n({...n,type:1})}async function Ar(n){return _n({...n,type:2})}var _utils = require('@noble/hashes/utils');var Gt=2**8-1,Bt=2**16-1,ee=2**32-1,be=BigInt(2)**BigInt(64)-BigInt(1),ct=BigInt(2)**BigInt(128)-BigInt(1),Mt=BigInt(2)**BigInt(256)-BigInt(1);var G=class extends Error{constructor(e,r){super(e);this.invalidReason=r}};var fi=(r=>(r.TOO_SHORT="too_short",r.INVALID_LENGTH="invalid_length",r.INVALID_HEX_CHARS="invalid_hex_chars",r))(fi||{}),m= exports.Hex =class n{constructor(t){this.data=t}toUint8Array(){return this.data}toStringWithoutPrefix(){return _utils.bytesToHex.call(void 0, this.data)}toString(){return`0x${this.toStringWithoutPrefix()}`}static fromString(t){let e=t;if(e.startsWith("0x")&&(e=e.slice(2)),e.length===0)throw new G("Hex string is too short, must be at least 1 char long, excluding the optional leading 0x.","too_short");if(e.length%2!==0)throw new G("Hex string must be an even number of hex characters.","invalid_length");try{return new n(_utils.hexToBytes.call(void 0, e))}catch(r){let o=r;throw new G(`Hex string contains invalid hex characters: ${o.message}`,"invalid_hex_chars")}}static fromHexInput(t){return t instanceof Uint8Array?new n(t):n.fromString(t)}static isValid(t){try{return n.fromString(t),{valid:!0}}catch(e){let r=e;return{valid:!1,invalidReason:r.invalidReason,invalidReasonMessage:r.message}}}equals(t){return this.data.length!==t.data.length?!1:this.data.every((e,r)=>e===t.data[r])}};var p=class{bcsToBytes(){let t=new Q;return this.serialize(t),t.toUint8Array()}bcsToHex(){let t=this.bcsToBytes();return m.fromHexInput(t)}},Q= exports.Serializer =class{constructor(t=64){if(t<=0)throw new Error("Length needs to be greater than 0");this.buffer=new ArrayBuffer(t),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){let e=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}appendToBuffer(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,e,r){this.ensureBufferWillHandleSize(e);let o=new DataView(this.buffer,this.offset);t.apply(o,[0,r,!0]),this.offset+=e}serializeStr(t){let e=new TextEncoder;this.serializeBytes(e.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.appendToBuffer(t)}serializeFixedBytes(t){this.appendToBuffer(t)}serializeBool(t){wn(t);let e=t?1:0;this.appendToBuffer(new Uint8Array([e]))}serializeU8(t){this.appendToBuffer(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){let e=BigInt(t)&BigInt(ee),r=BigInt(t)>>BigInt(32);this.serializeU32(Number(e)),this.serializeU32(Number(r))}serializeU128(t){let e=BigInt(t)&be,r=BigInt(t)>>BigInt(64);this.serializeU64(e),this.serializeU64(r)}serializeU256(t){let e=BigInt(t)&ct,r=BigInt(t)>>BigInt(128);this.serializeU128(e),this.serializeU128(r)}serializeU32AsUleb128(t){let e=t,r=[];for(;e>>>7;)r.push(e&127|128),e>>>=7;r.push(e),this.appendToBuffer(new Uint8Array(r))}toUint8Array(){return new Uint8Array(this.buffer).slice(0,this.offset)}serialize(t){t.serialize(this)}serializeVector(t){this.serializeU32AsUleb128(t.length),t.forEach(e=>{e.serialize(this)})}};O([_e(0,Gt)],Q.prototype,"serializeU8",1),O([_e(0,Bt)],Q.prototype,"serializeU16",1),O([_e(0,ee)],Q.prototype,"serializeU32",1),O([_e(BigInt(0),be)],Q.prototype,"serializeU64",1),O([_e(BigInt(0),ct)],Q.prototype,"serializeU128",1),O([_e(BigInt(0),Mt)],Q.prototype,"serializeU256",1),O([_e(0,ee)],Q.prototype,"serializeU32AsUleb128",1);function wn(n){if(typeof n!="boolean")throw new Error(`${n} is not a boolean value`)}var Ai=(n,t,e)=>`${n} is out of range: [${t}, ${e}]`;function ue(n,t,e){let r=BigInt(n);if(r>BigInt(e)||r<BigInt(t))throw new Error(Ai(n,t,e))}function _e(n,t){return(e,r,o)=>{let i=o.value;return o.value=function(a){return ue(a,n,t),i.apply(this,[a])},o}}var Ti=(a=>(a.INCORRECT_NUMBER_OF_BYTES="incorrect_number_of_bytes",a.INVALID_HEX_CHARS="invalid_hex_chars",a.TOO_SHORT="too_short",a.TOO_LONG="too_long",a.LEADING_ZERO_X_REQUIRED="leading_zero_x_required",a.LONG_FORM_REQUIRED_UNLESS_SPECIAL="long_form_required_unless_special",a.INVALID_PADDING_ZEROES="INVALID_PADDING_ZEROES",a))(Ti||{}),h=class h extends p{constructor(e){super();if(e.length!==h.LENGTH)throw new G("AccountAddress data should be exactly 32 bytes long","incorrect_number_of_bytes");this.data=e}isSpecial(){return this.data.slice(0,this.data.length-1).every(e=>e===0)&&this.data[this.data.length-1]<16}toString(){return`0x${this.toStringWithoutPrefix()}`}toStringWithoutPrefix(){let e=_utils.bytesToHex.call(void 0, this.data);return this.isSpecial()&&(e=e[e.length-1]),e}toStringLong(){return`0x${this.toStringLongWithoutPrefix()}`}toStringLongWithoutPrefix(){return _utils.bytesToHex.call(void 0, this.data)}toUint8Array(){return this.data}serialize(e){e.serializeFixedBytes(this.data)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(3),e.serialize(this)}static deserialize(e){let r=e.deserializeFixedBytes(h.LENGTH);return new h(r)}static fromString(e){if(!e.startsWith("0x"))throw new G("Hex string must start with a leading 0x.","leading_zero_x_required");let r=h.fromStringRelaxed(e);if(e.length!==h.LONG_STRING_LENGTH+2)if(r.isSpecial()){if(e.length!==3)throw new G(`The given hex string ${e} is a special address not in LONG form, it must be 0x0 to 0xf without padding zeroes.`,"INVALID_PADDING_ZEROES")}else throw new G(`The given hex string ${e} is not a special address, it must be represented as 0x + 64 chars.`,"long_form_required_unless_special");return r}static fromStringRelaxed(e){let r=e;if(e.startsWith("0x")&&(r=e.slice(2)),r.length===0)throw new G("Hex string is too short, must be 1 to 64 chars long, excluding the leading 0x.","too_short");if(r.length>64)throw new G("Hex string is too long, must be 1 to 64 chars long, excluding the leading 0x.","too_long");let o;try{o=_utils.hexToBytes.call(void 0, r.padStart(64,"0"))}catch(i){let s=i;throw new G(`Hex characters are invalid: ${s.message}`,"invalid_hex_chars")}return new h(o)}static fromRelaxed(e){return e instanceof h?e:e instanceof Uint8Array?new h(e):h.fromStringRelaxed(e)}static from(e){return e instanceof h?e:e instanceof Uint8Array?new h(e):h.fromString(e)}static isValid(e){try{return e.relaxed?h.fromRelaxed(e.input):h.from(e.input),{valid:!0}}catch(r){let o=r;return{valid:!1,invalidReason:o.invalidReason,invalidReasonMessage:o.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((r,o)=>r===e.data[o])}};h.LENGTH=32,h.LONG_STRING_LENGTH=64,h.ZERO=h.from("0x0"),h.ONE=h.from("0x1"),h.TWO=h.from("0x2"),h.THREE=h.from("0x3"),h.FOUR=h.from("0x4");var u=h;var _sha3 = require('@noble/hashes/sha3');var _tweetnacl = require('tweetnacl'); var _tweetnacl2 = _interopRequireDefault(_tweetnacl);var Tr=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}deserializeStr(){let t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){let t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){let t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let t=this.deserializeU32(),e=this.deserializeU32();return BigInt(BigInt(e)<<BigInt(32)|BigInt(t))}deserializeU128(){let t=this.deserializeU64(),e=this.deserializeU64();return BigInt(e<<BigInt(64)|t)}deserializeU256(){let t=this.deserializeU128(),e=this.deserializeU128();return BigInt(e<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),e=0;for(;t<ee;){let r=this.deserializeU8();if(t|=BigInt(r&127)<<BigInt(e),!(r&128))break;e+=7}if(t>ee)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}deserialize(t){return t.deserialize(this)}deserializeVector(t){let e=this.deserializeUleb128AsU32(),r=new Array;for(let o=0;o<e;o+=1)r.push(this.deserialize(t));return r}};var we=class n extends p{constructor(e){super();this.value=m.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,r){let o=e.deserializeFixedBytes(r);return new n(o)}};var Dt=class n extends p{constructor(e){super();this.value=new we(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,r){let o=we.deserialize(e,r);return new n(o.value)}};var x=class n extends p{constructor(e){super();wn(e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(5),e.serialize(this)}static deserialize(e){return new n(e.deserializeBool())}},k= exports.U8 =class n extends p{constructor(e){super();ue(e,0,Gt),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(0),e.serialize(this)}static deserialize(e){return new n(e.deserializeU8())}},$= exports.U16 =class n extends p{constructor(e){super();ue(e,0,Bt),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(6),e.serialize(this)}static deserialize(e){return new n(e.deserializeU16())}},L= exports.U32 =class n extends p{constructor(e){super();ue(e,0,ee),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(7),e.serialize(this)}static deserialize(e){return new n(e.deserializeU32())}},P= exports.U64 =class n extends p{constructor(e){super();ue(e,BigInt(0),be),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(1),e.serialize(this)}static deserialize(e){return new n(e.deserializeU64())}},H= exports.U128 =class n extends p{constructor(e){super();ue(e,BigInt(0),ct),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(2),e.serialize(this)}static deserialize(e){return new n(e.deserializeU128())}},V= exports.U256 =class n extends p{constructor(e){super();ue(e,BigInt(0),Mt),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(8),e.serialize(this)}static deserialize(e){return new n(e.deserializeU256())}};var T=class n extends p{constructor(e){super();this.values=e}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){if(!(this.values[0]instanceof k)&&this.values[0]!==void 0)throw new Error("Script function arguments only accept u8 vectors");e.serializeU32AsUleb128(4),e.serialize(this)}static U8(e){let r;if(Array.isArray(e)&&typeof e[0]=="number")r=e;else if(typeof e=="string"){let o=m.fromHexInput(e);r=Array.from(o.toUint8Array())}else if(e instanceof Uint8Array)r=Array.from(e);else throw new Error("Invalid input type");return new n(r.map(o=>new k(o)))}static U16(e){return new n(e.map(r=>new $(r)))}static U32(e){return new n(e.map(r=>new L(r)))}static U64(e){return new n(e.map(r=>new P(r)))}static U128(e){return new n(e.map(r=>new H(r)))}static U256(e){return new n(e.map(r=>new V(r)))}static Bool(e){return new n(e.map(r=>new x(r)))}static MoveString(e){return new n(e.map(r=>new E(r)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,r){let o=e.deserializeUleb128AsU32(),i=new Array;for(let s=0;s<o;s+=1)i.push(r.deserialize(e));return new n(i)}},E= exports.MoveString =class n extends p{constructor(e){super();this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){let r=this.bcsToBytes().slice(1);T.U8(r).serializeForScriptFunction(e)}static deserialize(e){return new n(e.deserializeStr())}},Se= exports.MoveOption =class n extends p{constructor(e){super();typeof e<"u"&&e!==null?this.vec=new T([e]):this.vec=new T([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new n(e!=null?new k(e):void 0)}static U16(e){return new n(e!=null?new $(e):void 0)}static U32(e){return new n(e!=null?new L(e):void 0)}static U64(e){return new n(e!=null?new P(e):void 0)}static U128(e){return new n(e!=null?new H(e):void 0)}static U256(e){return new n(e!=null?new V(e):void 0)}static Bool(e){return new n(e!=null?new x(e):void 0)}static MoveString(e){return new n(e!=null?new E(e):void 0)}static deserialize(e,r){let o=T.deserialize(e,r);return new n(o.values[0])}};var F=class extends p{},Ge= exports.PrivateKey =class extends p{},W= exports.Signature =class extends p{};var _hmac = require('@noble/hashes/hmac');var _sha512 = require('@noble/hashes/sha512');var _bip39 = require('@scure/bip39'); var br = _interopRequireWildcard(_bip39);var wi=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/,Si= exports.APTOS_BIP44_REGEX =/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/,xi= exports.KeyType =(t=>(t.ED25519="ed25519 seed",t))(xi||{}),_r= exports.HARDENED_OFFSET =2147483648;function wr(n){return Si.test(n)}function Sr(n){return wi.test(n)}var Sn=(n,t)=>{let e=_hmac.hmac.create(_sha512.sha512,n).update(t).digest();return{key:e.slice(0,32),chainCode:e.slice(32)}},xr= exports.CKDPriv =({key:n,chainCode:t},e)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,e);let o=new Uint8Array(r),i=new Uint8Array([0]),s=new Uint8Array([...i,...n,...o]);return Sn(t,s)},vi=n=>n.replace("'",""),vr= exports.splitPath =n=>n.split("/").slice(1).map(vi),Ft= exports.mnemonicToSeed =n=>{let t=n.trim().split(/\s+/).map(e=>e.toLowerCase()).join(" ");return br.mnemonicToSeedSync(t)};var xe=class xe extends F{constructor(e){super();let r=m.fromHexInput(e);if(r.toUint8Array().length!==xe.LENGTH)throw new Error(`PublicKey length should be ${xe.LENGTH}`);this.key=r}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}verifySignature(e){let{message:r,signature:o}=e,i=m.fromHexInput(r).toUint8Array(),s=o.toUint8Array();return _tweetnacl2.default.sign.detached.verify(i,s,this.key.toUint8Array())}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new xe(r)}static load(e){let r=e.deserializeBytes();return new xe(r)}};xe.LENGTH=32;var b=xe,B=class B extends Ge{constructor(e){super();let r=m.fromHexInput(e);if(r.toUint8Array().length!==B.LENGTH)throw new Error(`PrivateKey length should be ${B.LENGTH}`);this.signingKeyPair=_tweetnacl2.default.sign.keyPair.fromSeed(r.toUint8Array().slice(0,B.LENGTH))}toUint8Array(){return this.signingKeyPair.secretKey.slice(0,B.LENGTH)}toString(){return m.fromHexInput(this.toUint8Array()).toString()}sign(e){let r=m.fromHexInput(e),o=_tweetnacl2.default.sign.detached(r.toUint8Array(),this.signingKeyPair.secretKey);return new v(o)}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new B(r)}static generate(){let e=_tweetnacl2.default.sign.keyPair();return new B(e.secretKey.slice(0,B.LENGTH))}publicKey(){let e=this.signingKeyPair.publicKey;return new b(e)}static fromDerivationPath(e,r){if(!Sr(e))throw new Error(`Invalid derivation path ${e}`);return B.fromDerivationPathInner(e,Ft(r))}static fromDerivationPathInner(e,r,o=_r){let{key:i,chainCode:s}=Sn(B.SLIP_0010_SEED,r),a=vr(e).map(d=>parseInt(d,10)),{key:c}=a.reduce((d,y)=>xr(d,y+o),{key:i,chainCode:s});return new B(c)}};B.LENGTH=32,B.SLIP_0010_SEED="ed25519 seed";var de=B,ve=class ve extends W{constructor(e){super();let r=m.fromHexInput(e);if(r.toUint8Array().length!==ve.LENGTH)throw new Error(`Signature length should be ${ve.LENGTH}`);this.data=r}toUint8Array(){return this.data.toUint8Array()}toString(){return this.data.toString()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new ve(r)}static load(e){let r=e.deserializeBytes();return new ve(r)}};ve.LENGTH=64;var v=ve;var q=class q extends F{constructor(e){super();let{publicKeys:r,threshold:o}=e;if(r.length>q.MAX_KEYS||r.length<q.MIN_KEYS)throw new Error(`Must have between ${q.MIN_KEYS} and ${q.MAX_KEYS} public keys, inclusive`);if(o<q.MIN_THRESHOLD||o>r.length)throw new Error(`Threshold must be between ${q.MIN_THRESHOLD} and ${r.length}, inclusive`);this.publicKeys=r,this.threshold=o}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*b.LENGTH+1);return this.publicKeys.forEach((r,o)=>{e.set(r.toUint8Array(),o*b.LENGTH)}),e[this.publicKeys.length*b.LENGTH]=this.threshold,e}toString(){return m.fromHexInput(this.toUint8Array()).toString()}verifySignature(e){throw new Error("TODO - Method not implemented.")}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes(),o=r[r.length-1],i=[];for(let s=0;s<r.length-1;s+=b.LENGTH){let a=s;i.push(new b(r.subarray(a,a+b.LENGTH)))}return new q({publicKeys:i,threshold:o})}};q.MAX_KEYS=32,q.MIN_KEYS=2,q.MIN_THRESHOLD=1;var j=q,K=class K extends W{constructor(e){super();let{signatures:r,bitmap:o}=e;if(o.length!==K.BITMAP_LEN)throw new Error(`"bitmap" length should be ${K.BITMAP_LEN}`);if(r.length>K.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${K.MAX_SIGNATURES_SUPPORTED}`);this.signatures=r,this.bitmap=o}toUint8Array(){let e=new Uint8Array(this.signatures.length*v.LENGTH+K.BITMAP_LEN);return this.signatures.forEach((r,o)=>{e.set(r.toUint8Array(),o*v.LENGTH)}),e.set(this.bitmap,this.signatures.length*v.LENGTH),e}toString(){return m.fromHexInput(this.toUint8Array()).toString()}static createBitmap(e){let{bits:r}=e,o=128,i=new Uint8Array([0,0,0,0]),s=new Set;return r.forEach(a=>{if(a>=K.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${K.MAX_SIGNATURES_SUPPORTED-1}.`);if(s.has(a))throw new Error("Duplicate bits detected.");s.add(a);let c=Math.floor(a/8),d=i[c];d|=o>>a%8,i[c]=d}),i}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes(),o=r.subarray(r.length-4),i=[];for(let s=0;s<r.length-o.length;s+=v.LENGTH){let a=s;i.push(new v(r.subarray(a,a+v.LENGTH)))}return new K({signatures:i,bitmap:o})}};K.MAX_SIGNATURES_SUPPORTED=32,K.BITMAP_LEN=4;var Be=K;var _secp256k1 = require('@noble/curves/secp256k1');var _bip32 = require('@scure/bip32');var Ce=class Ce extends F{constructor(e){super();let r=m.fromHexInput(e);if(r.toUint8Array().length!==Ce.LENGTH)throw new Error(`PublicKey length should be ${Ce.LENGTH}`);this.key=r}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}verifySignature(e){let{message:r,signature:o}=e,i=m.fromHexInput(r).toUint8Array(),s=_sha3.sha3_256.call(void 0, i),a=o.toUint8Array();return _secp256k1.secp256k1.verify(a,s,this.toUint8Array())}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new Ce(r)}static load(e){let r=e.deserializeBytes();return new Ce(r)}};Ce.LENGTH=65;var X=Ce,te=class te extends Ge{constructor(e){super();let r=m.fromHexInput(e);if(r.toUint8Array().length!==te.LENGTH)throw new Error(`PrivateKey length should be ${te.LENGTH}`);this.key=r}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}sign(e){let r=m.fromHexInput(e),o=_sha3.sha3_256.call(void 0, r.toUint8Array()),i=_secp256k1.secp256k1.sign(o,this.key.toUint8Array());return new le(i.toCompactRawBytes())}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new te(r)}static generate(){let e=_secp256k1.secp256k1.utils.randomPrivateKey();return new te(e)}publicKey(){let e=_secp256k1.secp256k1.getPublicKey(this.key.toUint8Array(),!1);return new X(e)}static fromDerivationPath(e,r){if(!wr(e))throw new Error(`Invalid derivation path ${e}`);return te.fromDerivationPathInner(e,Ft(r))}static fromDerivationPathInner(e,r){let{privateKey:o}=_bip32.HDKey.fromMasterSeed(r).derive(e);if(o===null)throw new Error("Invalid key");return new te(o)}};te.LENGTH=32;var pe=te,Ue=class Ue extends W{constructor(e){super();let r=m.fromHexInput(e);if(r.toUint8Array().length!==Ue.LENGTH)throw new Error(`Signature length should be ${Ue.LENGTH}, recieved ${r.toUint8Array().length}`);this.data=r}toUint8Array(){return this.data.toUint8Array()}toString(){return this.data.toString()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new Ue(r)}static load(e){let r=e.deserializeBytes();return new Ue(r)}};Ue.LENGTH=64;var le=Ue;var C=class n extends F{constructor(e){super();this.publicKey=e}toUint8Array(){return this.publicKey.toUint8Array()}toString(){return this.publicKey.toString()}verifySignature(e){let{message:r,signature:o}=e;return this.publicKey.verifySignature({message:r,signature:o})}serialize(e){if(this.publicKey instanceof b)e.serializeU32AsUleb128(0),this.publicKey.serialize(e);else if(this.publicKey instanceof X)e.serializeU32AsUleb128(1),this.publicKey.serialize(e);else throw new Error("Unknown public key type")}static deserialize(e){let r=e.deserializeUleb128AsU32();switch(r){case 0:return new n(b.load(e));case 1:return new n(X.load(e));default:throw new Error(`Unknown variant index for AnyPublicKey: ${r}`)}}};var Me=class n extends F{constructor(e){super();let{publicKeys:r,signaturesRequired:o}=e;if(o<1)throw new Error("The number of required signatures needs to be greater then 0");if(r.length<o)throw new Error(`Provided ${r.length} public keys is smaller than the ${o} required signatures`);let i=[];r.forEach(s=>{s instanceof C?i.push(s):i.push(new C(s))}),this.publicKeys=i,this.signaturesRequired=o}toUint8Array(){return this.bcsToBytes()}createBitmap(e){let{bits:r}=e,o=128,i=new Uint8Array([0,0,0,0]),s=new Set;return r.forEach((a,c)=>{if(c+1>this.publicKeys.length)throw new Error(`Signature index ${c+1} is out of public keys range, ${this.publicKeys.length}.`);if(s.has(a))throw new Error(`Duplicate bit ${a} detected.`);s.add(a);let d=Math.floor(a/8),y=i[d];y|=o>>a%8,i[d]=y}),i}toString(){return m.fromHexInput(this.toUint8Array()).toString()}verifySignature(e){throw new Error("not implemented")}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let r=e.deserializeVector(C),o=e.deserializeU8();return new n({publicKeys:r,signaturesRequired:o})}};var ne=class ne extends p{constructor(e){super();let{data:r}=e,o=m.fromHexInput(r);if(o.toUint8Array().length!==ne.LENGTH)throw new Error(`Authentication Key length should be ${ne.LENGTH}`);this.data=o}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let r=e.deserializeFixedBytes(ne.LENGTH);return new ne({data:r})}toString(){return this.data.toString()}toUint8Array(){return this.data.toUint8Array()}static fromPublicKeyAndScheme(e){let{publicKey:r,scheme:o}=e,i;switch(o){case 3:case 2:{let c=r.bcsToBytes();i=new Uint8Array([...c,o]);break}case 0:case 1:{let c=r.toUint8Array(),d=m.fromHexInput(c).toUint8Array();i=new Uint8Array([...d,o]);break}default:throw new Error(`Scheme ${o} is not supported`)}let s=_sha3.sha3_256.create();s.update(i);let a=s.digest();return new ne({data:a})}static fromPublicKey(e){let{publicKey:r}=e,o;if(r instanceof b)o=0 .valueOf();else if(r instanceof j)o=1 .valueOf();else if(r instanceof C)o=2 .valueOf();else if(r instanceof Me)o=3 .valueOf();else throw new Error("No supported authentication scheme for public key");return ne.fromPublicKeyAndScheme({publicKey:r,scheme:o})}derivedAddress(){return new u(this.data.toUint8Array())}};ne.LENGTH=32;var Y=ne;var ge=class n{constructor(t){let{privateKey:e,address:r,legacy:o}=t,i=_nullishCoalesce(o, () => (!0));if(this.publicKey=e.publicKey(),this.publicKey instanceof b)i?this.signingScheme=0:(this.publicKey=new C(this.publicKey),this.signingScheme=2);else if(this.publicKey instanceof j)this.signingScheme=1;else if(this.publicKey instanceof X)this.publicKey=new C(this.publicKey),this.signingScheme=2;else throw new Error("Can not create new Account, unsupported public key type");this.privateKey=e,this.accountAddress=r}static generate(t){let e=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _15 => _15.legacy]), () => (!0)),r,o;switch(_optionalChain([t, 'optionalAccess', _16 => _16.scheme])){case 2:r=pe.generate(),o=new C(r.publicKey());break;default:r=de.generate(),e===!1?o=new C(r.publicKey()):o=r.publicKey()}let s=Y.fromPublicKey({publicKey:o}).derivedAddress();return new n({privateKey:r,address:s,legacy:_optionalChain([t, 'optionalAccess', _17 => _17.legacy])})}static fromPrivateKey(t){let{privateKey:e,legacy:r}=t,o=_nullishCoalesce(r, () => (!0)),i;if(e instanceof pe)i=new C(e.publicKey());else if(e instanceof de)o?i=e.publicKey():i=new C(e.publicKey());else throw new Error(`Unsupported private key ${e}`);let a=Y.fromPublicKey({publicKey:i}).derivedAddress();return new n({privateKey:e,address:a,legacy:o})}static fromPrivateKeyAndAddress(t){let{privateKey:e,address:r,legacy:o}=t;return new n({privateKey:e,address:r,legacy:o})}static fromDerivationPath(t){let{path:e,mnemonic:r,scheme:o,legacy:i}=t,s;switch(o){case 2:s=pe.fromDerivationPath(e,r);break;case 0:s=de.fromDerivationPath(e,r);break;default:throw new Error(`Unsupported scheme ${o}`)}return n.fromPrivateKey({privateKey:s,legacy:i})}static authKey(t){let{publicKey:e}=t;return Y.fromPublicKey({publicKey:e})}sign(t){return this.privateKey.sign(t)}verifySignature(t){let{message:e,signature:r}=t,o=m.fromHexInput(e).toUint8Array();return this.publicKey.verifySignature({message:o,signature:r})}};var Pi=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,Ei=`
    fragment AnsTokenFragment on current_aptos_names {
  domain
  expiration_timestamp
  registered_address
  subdomain
  token_standard
  is_primary
  owner_address
}
    `,$t=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Ur=`
    query getAccountCoinsCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,Pr=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,Er=`
    query getAccountCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,Ir=`
    query getAccountOwnedObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,Rr=`
    query getAccountOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$t}`,Cc=`
    query getAccountOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$t}`,zr=`
    query getAccountOwnedTokensFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$t}`,kr=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,Nr=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,Or=`
    query getChainTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Gr=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!) {
  current_collections_v2(where: $where_condition) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,Br=`
    query getCurrentFungibleAssetBalances($where_condition: current_fungible_asset_balances_bool_exp, $offset: Int, $limit: Int) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
  }
}
    `,Mr=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,Dr=`
    query getEvents($where_condition: events_bool_exp, $offset: Int, $limit: Int, $order_by: [events_order_by!]) {
  events(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    account_address
    creation_number
    data
    event_index
    sequence_number
    transaction_block_height
    transaction_version
    type
    indexed_type
  }
}
    `,Fr=`
    query getFungibleAssetActivities($where_condition: fungible_asset_activities_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_activities(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    block_height
    entry_function_id_str
    event_index
    gas_fee_payer_address
    is_frozen
    is_gas_fee
    is_transaction_success
    owner_address
    storage_id
    storage_refund_amount
    token_standard
    transaction_timestamp
    transaction_version
    type
  }
}
    `,qr=`
    query getFungibleAssetMetadata($where_condition: fungible_asset_metadata_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_metadata(where: $where_condition, offset: $offset, limit: $limit) {
    icon_uri
    project_uri
    supply_aggregator_table_handle_v1
    supply_aggregator_table_key_v1
    creator_address
    asset_type
    decimals
    last_transaction_timestamp
    last_transaction_version
    name
    symbol
    token_standard
  }
}
    `,De=`
    query getNames($offset: Int, $limit: Int, $where_condition: current_aptos_names_bool_exp, $order_by: [current_aptos_names_order_by!]) {
  current_aptos_names(
    limit: $limit
    where: $where_condition
    order_by: $order_by
    offset: $offset
  ) {
    ...AnsTokenFragment
  }
}
    ${Ei}`,xn=`
    query getNumberOfDelegators($where_condition: num_active_delegator_per_pool_bool_exp, $order_by: [num_active_delegator_per_pool_order_by!]) {
  num_active_delegator_per_pool(where: $where_condition, order_by: $order_by) {
    num_active_delegator
    pool_address
  }
}
    `,vn=`
    query getProcessorStatus($where_condition: processor_status_bool_exp) {
  processor_status(where: $where_condition) {
    last_success_version
    processor
    last_updated
  }
}
    `,Kr=`
    query getTokenActivity($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${Pi}`,Cn=`
    query getCurrentTokenOwnership($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$t}`,$r=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `;async function Lt(n){let{aptosConfig:t}=n,{data:e}=await M({aptosConfig:t,originMethod:"getLedgerInfo",path:""});return e}async function Lr(n){let{aptosConfig:t,ledgerVersion:e,options:r}=n,{data:o}=await M({aptosConfig:t,originMethod:"getBlockByVersion",path:`blocks/by_version/${e}`,params:{with_transactions:_optionalChain([r, 'optionalAccess', _18 => _18.withTransactions])}});return o}async function Hr(n){let{aptosConfig:t,blockHeight:e,options:r}=n,{data:o}=await M({aptosConfig:t,originMethod:"getBlockByHeight",path:`blocks/by_height/${e}`,params:{with_transactions:_optionalChain([r, 'optionalAccess', _19 => _19.withTransactions])}});return o}async function Ht(n){let{aptosConfig:t,handle:e,data:r,options:o}=n;return(await Oe({aptosConfig:t,originMethod:"getTableItem",path:`tables/${e}/item`,params:{ledger_version:_optionalChain([o, 'optionalAccess', _20 => _20.ledgerVersion])},body:r})).data}async function me(n){let{aptosConfig:t,payload:e,options:r}=n,{data:o}=await Oe({aptosConfig:t,originMethod:"view",path:"view",params:{ledger_version:_optionalChain([r, 'optionalAccess', _21 => _21.ledgerVersion])},body:{function:e.function,type_arguments:_nullishCoalesce(e.typeArguments, () => ([])),arguments:_nullishCoalesce(e.functionArguments, () => ([]))}});return o}async function Vr(n){let{aptosConfig:t,limit:e}=n;return(await l({aptosConfig:t,query:{query:Or,variables:{limit:e}},originMethod:"getChainTopUserTransactions"})).user_transactions}async function l(n){let{aptosConfig:t,query:e,originMethod:r}=n,{data:o}=await fr({aptosConfig:t,originMethod:_nullishCoalesce(r, () => ("queryIndexer")),path:"",body:e,overrides:{WITH_CREDENTIALS:!1}});return o}async function Ii(n){let{aptosConfig:t}=n;return(await l({aptosConfig:t,query:{query:vn},originMethod:"getProcessorStatuses"})).processor_status}async function Vt(n){return(await Ii({aptosConfig:n.aptosConfig}))[0].last_success_version}async function Qt(n){let{aptosConfig:t,processorType:e}=n,r={processor:{_eq:e.valueOf()}};return(await l({aptosConfig:t,query:{query:vn,variables:{where_condition:r}},originMethod:"getProcessorStatus"})).processor_status[0]}var Un=new Map;function Fe(n,t,e){return async(...r)=>{if(Un.has(t)){let{value:i,timestamp:s}=Un.get(t);if(e===void 0||Date.now()-s<=e)return i}let o=await n(...r);return Un.set(t,{value:o,timestamp:Date.now()}),o}}var re=class n extends W{constructor(e){super();this.signature=e}toUint8Array(){return this.signature.toUint8Array()}toString(){return this.signature.toString()}serialize(e){if(this.signature instanceof v)e.serializeU32AsUleb128(0),this.signature.serialize(e);else if(this.signature instanceof le)e.serializeU32AsUleb128(1),this.signature.serialize(e);else throw new Error("Unknown signature type")}static deserialize(e){let r=e.deserializeUleb128AsU32();switch(r){case 0:return new n(v.load(e));case 1:return new n(le.load(e));default:throw new Error(`Unknown variant index for AnySignature: ${r}`)}}};async function Pe(n){let{aptosConfig:t,accountAddress:e}=n,{data:r}=await M({aptosConfig:t,originMethod:"getInfo",path:`accounts/${u.from(e).toString()}`});return r}async function jr(n){let{aptosConfig:t,accountAddress:e,options:r}=n;return Ne({aptosConfig:t,originMethod:"getModules",path:`accounts/${u.from(e).toString()}/modules`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _22 => _22.ledgerVersion]),start:_optionalChain([r, 'optionalAccess', _23 => _23.offset]),limit:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _24 => _24.limit]), () => (1e3))}})}async function Wt(n){return _optionalChain([n, 'access', _25 => _25.options, 'optionalAccess', _26 => _26.ledgerVersion])!==void 0?Qr(n):Fe(async()=>Qr(n),`module-${n.accountAddress}-${n.moduleName}`,1e3*60*5)()}async function Qr(n){let{aptosConfig:t,accountAddress:e,moduleName:r,options:o}=n,{data:i}=await M({aptosConfig:t,originMethod:"getModule",path:`accounts/${u.from(e).toString()}/module/${r}`,params:{ledger_version:_optionalChain([o, 'optionalAccess', _27 => _27.ledgerVersion])}});return i}async function Xr(n){let{aptosConfig:t,accountAddress:e,options:r}=n;return Ne({aptosConfig:t,originMethod:"getTransactions",path:`accounts/${u.from(e).toString()}/transactions`,params:{start:_optionalChain([r, 'optionalAccess', _28 => _28.offset]),limit:_optionalChain([r, 'optionalAccess', _29 => _29.limit])}})}async function Yr(n){let{aptosConfig:t,accountAddress:e,options:r}=n;return Ne({aptosConfig:t,originMethod:"getResources",path:`accounts/${u.from(e).toString()}/resources`,params:{ledger_version:_optionalChain([r, 'optionalAccess', _30 => _30.ledgerVersion]),start:_optionalChain([r, 'optionalAccess', _31 => _31.offset]),limit:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _32 => _32.limit]), () => (999))}})}async function Pn(n){let{aptosConfig:t,accountAddress:e,resourceType:r,options:o}=n,{data:i}=await M({aptosConfig:t,originMethod:"getResource",path:`accounts/${u.from(e).toString()}/resource/${r}`,params:{ledger_version:_optionalChain([o, 'optionalAccess', _33 => _33.ledgerVersion])}});return i.data}async function En(n){let{aptosConfig:t,authenticationKey:e,options:r}=n,o=await Pn({aptosConfig:t,accountAddress:"0x1",resourceType:"0x1::account::OriginatingAddress",options:r}),{address_map:{handle:i}}=o,s=u.from(e);try{let a=await Ht({aptosConfig:t,handle:i,data:{key:s.toString(),key_type:"address",value_type:"address"},options:r});return u.from(a)}catch(a){if(a instanceof J&&a.data.error_code==="table_item_not_found")return s;throw a}}async function Zr(n){let{aptosConfig:t,accountAddress:e}=n,o={owner_address:{_eq:u.from(e).toStringLong()},amount:{_gt:0}},s=await l({aptosConfig:t,query:{query:kr,variables:{where_condition:o}},originMethod:"getAccountTokensCount"});return s.current_token_ownerships_v2_aggregate.aggregate?s.current_token_ownerships_v2_aggregate.aggregate.count:0}async function Jr(n){let{aptosConfig:t,accountAddress:e,options:r}=n,i={owner_address:{_eq:u.from(e).toStringLong()},amount:{_gt:0}};_optionalChain([r, 'optionalAccess', _34 => _34.tokenStandard])&&(i.token_standard={_eq:_optionalChain([r, 'optionalAccess', _35 => _35.tokenStandard])});let s={query:Rr,variables:{where_condition:i,offset:_optionalChain([r, 'optionalAccess', _36 => _36.pagination, 'optionalAccess', _37 => _37.offset]),limit:_optionalChain([r, 'optionalAccess', _38 => _38.pagination, 'optionalAccess', _39 => _39.limit]),order_by:_optionalChain([r, 'optionalAccess', _40 => _40.orderBy])}};return(await l({aptosConfig:t,query:s,originMethod:"getAccountOwnedTokens"})).current_token_ownerships_v2}async function eo(n){let{aptosConfig:t,accountAddress:e,collectionAddress:r,options:o}=n,i=u.from(e).toStringLong(),s=u.from(r).toStringLong(),a={owner_address:{_eq:i},current_token_data:{collection_id:{_eq:s}},amount:{_gt:0}};_optionalChain([o, 'optionalAccess', _41 => _41.tokenStandard])&&(a.token_standard={_eq:_optionalChain([o, 'optionalAccess', _42 => _42.tokenStandard])});let c={query:zr,variables:{where_condition:a,offset:_optionalChain([o, 'optionalAccess', _43 => _43.pagination, 'optionalAccess', _44 => _44.offset]),limit:_optionalChain([o, 'optionalAccess', _45 => _45.pagination, 'optionalAccess', _46 => _46.limit]),order_by:_optionalChain([o, 'optionalAccess', _47 => _47.orderBy])}};return(await l({aptosConfig:t,query:c,originMethod:"getAccountOwnedTokensFromCollectionAddress"})).current_token_ownerships_v2}async function to(n){let{aptosConfig:t,accountAddress:e,options:r}=n,i={owner_address:{_eq:u.from(e).toStringLong()},amount:{_gt:0}};_optionalChain([r, 'optionalAccess', _48 => _48.tokenStandard])&&(i.current_collection={token_standard:{_eq:_optionalChain([r, 'optionalAccess', _49 => _49.tokenStandard])}});let s={query:Er,variables:{where_condition:i,offset:_optionalChain([r, 'optionalAccess', _50 => _50.pagination, 'optionalAccess', _51 => _51.offset]),limit:_optionalChain([r, 'optionalAccess', _52 => _52.pagination, 'optionalAccess', _53 => _53.limit]),order_by:_optionalChain([r, 'optionalAccess', _54 => _54.orderBy])}};return(await l({aptosConfig:t,query:s,originMethod:"getAccountCollectionsWithOwnedTokens"})).current_collection_ownership_v2_view}async function no(n){let{aptosConfig:t,accountAddress:e}=n,r=u.from(e).toStringLong(),i=await l({aptosConfig:t,query:{query:Nr,variables:{address:r}},originMethod:"getAccountTransactionsCount"});return i.account_transactions_aggregate.aggregate?i.account_transactions_aggregate.aggregate.count:0}async function ro(n){let{aptosConfig:t,accountAddress:e,options:r}=n,i={owner_address:{_eq:u.from(e).toStringLong()}},s={query:Pr,variables:{where_condition:i,offset:_optionalChain([r, 'optionalAccess', _55 => _55.pagination, 'optionalAccess', _56 => _56.offset]),limit:_optionalChain([r, 'optionalAccess', _57 => _57.pagination, 'optionalAccess', _58 => _58.limit]),order_by:_optionalChain([r, 'optionalAccess', _59 => _59.orderBy])}};return(await l({aptosConfig:t,query:s,originMethod:"getAccountCoinsData"})).current_fungible_asset_balances}async function oo(n){let{aptosConfig:t,accountAddress:e}=n,r=u.from(e).toStringLong(),i=await l({aptosConfig:t,query:{query:Ur,variables:{address:r}},originMethod:"getAccountCoinsCount"});if(!i.current_fungible_asset_balances_aggregate.aggregate)throw Error("Failed to get the count of account coins");return i.current_fungible_asset_balances_aggregate.aggregate.count}async function io(n){let{aptosConfig:t,accountAddress:e,options:r}=n,i={owner_address:{_eq:u.from(e).toStringLong()}},s={query:Ir,variables:{where_condition:i,offset:_optionalChain([r, 'optionalAccess', _60 => _60.pagination, 'optionalAccess', _61 => _61.offset]),limit:_optionalChain([r, 'optionalAccess', _62 => _62.pagination, 'optionalAccess', _63 => _63.limit]),order_by:_optionalChain([r, 'optionalAccess', _64 => _64.orderBy])}};return(await l({aptosConfig:t,query:s,originMethod:"getAccountOwnedObjects"})).current_objects}async function so(n){let{aptosConfig:t,privateKey:e}=n,r=new C(e.publicKey());if(e instanceof pe){let i=Y.fromPublicKeyAndScheme({publicKey:r,scheme:2}).derivedAddress();return ge.fromPrivateKeyAndAddress({privateKey:e,address:i})}if(e instanceof de){let o=Y.fromPublicKeyAndScheme({publicKey:r,scheme:2});if(await Wr({authKey:o,aptosConfig:t})){let c=o.derivedAddress();return ge.fromPrivateKeyAndAddress({privateKey:e,address:c,legacy:!1})}let s=Y.fromPublicKeyAndScheme({publicKey:r,scheme:0});if(await Wr({authKey:s,aptosConfig:t})){let c=s.derivedAddress();return ge.fromPrivateKeyAndAddress({privateKey:e,address:c,legacy:!0})}}throw new Error(`Can't derive account from private key ${e}`)}async function Wr(n){let{aptosConfig:t,authKey:e}=n,r=await En({aptosConfig:t,authenticationKey:e.derivedAddress()});try{return await Pe({aptosConfig:t,accountAddress:r}),!0}catch(o){if(o.status===404)return!1;throw new Error(`Error while looking for an account info ${r.toString()}`)}}async function In(n){return new Promise(t=>{setTimeout(t,n)})}async function ao(n){let{aptosConfig:t,options:e}=n;return Ne({aptosConfig:t,originMethod:"getTransactions",path:"transactions",params:{start:_optionalChain([e, 'optionalAccess', _65 => _65.offset]),limit:_optionalChain([e, 'optionalAccess', _66 => _66.limit])}})}async function Xt(n){let{aptosConfig:t}=n;return Fe(async()=>{let{data:e}=await M({aptosConfig:t,originMethod:"getGasPriceEstimation",path:"estimate_gas_price"});return e},`gas-price-${t.network}`,1e3*60*5)()}async function co(n){let{aptosConfig:t,ledgerVersion:e}=n,{data:r}=await M({aptosConfig:t,originMethod:"getTransactionByVersion",path:`transactions/by_version/${e}`});return r}async function Yt(n){let{aptosConfig:t,transactionHash:e}=n,{data:r}=await M({aptosConfig:t,path:`transactions/by_hash/${e}`,originMethod:"getTransactionByHash"});return r}async function uo(n){let{aptosConfig:t,transactionHash:e}=n;try{return(await Yt({aptosConfig:t,transactionHash:e})).type==="pending_transaction"}catch(r){if(_optionalChain([r, 'optionalAccess', _67 => _67.status])===404)return!0;throw r}}async function Zt(n){let{aptosConfig:t,transactionHash:e,options:r}=n,o=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _68 => _68.timeoutSecs]), () => (Ot)),i=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _69 => _69.checkSuccess]), () => (!0)),s=!0,a=0,c,d,y=200,z=1.5;for(;s&&!(a>=o);){try{if(c=await Yt({aptosConfig:t,transactionHash:e}),s=c.type==="pending_transaction",!s)break}catch(A){if(!(A instanceof J)||(d=A,A.status!==404&&A.status>=400&&A.status<500))throw A}await In(y),a+=y/1e3,y*=z}if(c===void 0)throw d||new jt(`Fetching transaction ${e} failed and timed out after ${o} seconds`,c);if(c.type==="pending_transaction")throw new jt(`Transaction ${e} timed out in pending state after ${o} seconds`,c);if(!i)return c;if(!c.success)throw new Rn(`Transaction ${e} failed with an error: ${c.vm_status}`,c);return c}async function Jt(n){let{aptosConfig:t,processorType:e}=n,r=BigInt(n.minimumLedgerVersion),o=3e3,i=new Date().getTime(),s=-1;for(;s<r;){if(new Date().getTime()-i>o)throw new Error("waitForLastSuccessIndexerVersionSync timeout");if(e===void 0?s=await Vt({aptosConfig:t}):s=(await Qt({aptosConfig:t,processorType:e})).last_success_version,s>=r)break;await In(200)}}var jt=class extends Error{constructor(e,r){super(e);this.lastSubmittedTransaction=r}},Rn=class extends Error{constructor(e,r){super(e);this.transaction=r}};async function f(n){if(n.minimumLedgerVersion!==void 0){let t=[];for(let e of n.processorTypes)t.push(Jt({aptosConfig:n.config,minimumLedgerVersion:n.minimumLedgerVersion,processorType:e}));await Promise.all(t)}}var ut=class{constructor(t){this.config=t}async getAccountInfo(t){return Pe({aptosConfig:this.config,...t})}async getAccountModules(t){return jr({aptosConfig:this.config,...t})}async getAccountModule(t){return Wt({aptosConfig:this.config,...t})}async getAccountTransactions(t){return Xr({aptosConfig:this.config,...t})}async getAccountResources(t){return Yr({aptosConfig:this.config,...t})}async getAccountResource(t){return Pn({aptosConfig:this.config,...t})}async lookupOriginalAccountAddress(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),En({aptosConfig:this.config,...t})}async getAccountTokensCount(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),Zr({aptosConfig:this.config,...t})}async getAccountOwnedTokens(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),Jr({aptosConfig:this.config,...t})}async getAccountOwnedTokensFromCollectionAddress(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),eo({aptosConfig:this.config,...t})}async getAccountCollectionsWithOwnedTokens(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),to({aptosConfig:this.config,...t})}async getAccountTransactionsCount(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),no({aptosConfig:this.config,...t})}async getAccountCoinsData(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),ro({aptosConfig:this.config,...t})}async getAccountCoinsCount(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),oo({aptosConfig:this.config,...t})}async getAccountOwnedObjects(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["account_transactions_processor"]}),io({aptosConfig:this.config,...t})}async deriveAccountFromPrivateKey(t){return so({aptosConfig:this.config,...t})}};var _aptosclient = require('@aptos-labs/aptos-client'); var _aptosclient2 = _interopRequireDefault(_aptosclient);var en=class{constructor(t){this.network=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _70 => _70.network]), () => (pr)),this.fullnode=_optionalChain([t, 'optionalAccess', _71 => _71.fullnode]),this.faucet=_optionalChain([t, 'optionalAccess', _72 => _72.faucet]),this.indexer=_optionalChain([t, 'optionalAccess', _73 => _73.indexer]),this.client=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _74 => _74.client]), () => ({provider:_aptosclient2.default})),this.clientConfig=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _75 => _75.clientConfig]), () => ({}))}getRequestUrl(t){switch(t){case 0:if(this.fullnode!==void 0)return this.fullnode;if(this.network==="custom")throw new Error("Please provide a custom full node url");return ur[this.network];case 2:if(this.faucet!==void 0)return this.faucet;if(this.network==="custom")throw new Error("Please provide a custom faucet url");return dr[this.network];case 1:if(this.indexer!==void 0)return this.indexer;if(this.network==="custom")throw new Error("Please provide a custom indexer url");return hn[this.network];default:throw Error(`apiType ${t} is not supported`)}}isIndexerRequest(t){return hn[this.network]===t}};var tn=class extends p{constructor(e){super();this.accountAddress=u.ONE;this.moduleName=new E("account");this.structName=new E("RotationProofChallenge");this.sequenceNumber=new P(e.sequenceNumber),this.originator=e.originator,this.currentAuthKey=e.currentAuthKey,this.newPublicKey=T.U8(e.newPublicKey.toUint8Array())}serialize(e){e.serialize(this.accountAddress),e.serialize(this.moduleName),e.serialize(this.structName),e.serialize(this.sequenceNumber),e.serialize(this.originator),e.serialize(this.currentAuthKey),e.serialize(this.newPublicKey)}};var D=class extends p{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return ye.load(t);case 1:return zn.load(t);case 2:return oe.load(t);case 3:return dt.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}},ye= exports.AccountAuthenticatorEd25519 =class n extends D{constructor(e,r){super();this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=b.deserialize(e),o=v.deserialize(e);return new n(r,o)}},zn= exports.AccountAuthenticatorMultiEd25519 =class n extends D{constructor(e,r){super();this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=j.deserialize(e),o=Be.deserialize(e);return new n(r,o)}},oe= exports.AccountAuthenticatorSingleKey =class n extends D{constructor(e,r){super();this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(2),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=C.deserialize(e),o=re.deserialize(e);return new n(r,o)}},dt= exports.AccountAuthenticatorMultiKey =class n extends D{constructor(e,r,o){super();this.public_keys=e,this.signatures=r,this.signatures_bitmap=o}serialize(e){e.serializeU32AsUleb128(3),this.public_keys.serialize(e),e.serializeVector(this.signatures),e.serializeBytes(this.signatures_bitmap)}static load(e){let r=Me.deserialize(e),o=e.deserializeVector(re),i=e.deserializeBytes();return new n(r,o,i)}};var ie=class extends p{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return qe.load(t);case 1:return kn.load(t);case 2:return Ke.load(t);case 3:return $e.load(t);case 4:return Le.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}},qe= exports.TransactionAuthenticatorEd25519 =class n extends ie{constructor(e,r){super();this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=b.deserialize(e),o=v.deserialize(e);return new n(r,o)}},kn= exports.TransactionAuthenticatorMultiEd25519 =class n extends ie{constructor(e,r){super();this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=j.deserialize(e),o=Be.deserialize(e);return new n(r,o)}},Ke= exports.TransactionAuthenticatorMultiAgent =class n extends ie{constructor(e,r,o){super();this.sender=e,this.secondary_signer_addresses=r,this.secondary_signers=o}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let r=D.deserialize(e),o=e.deserializeVector(u),i=e.deserializeVector(D);return new n(r,o,i)}},$e= exports.TransactionAuthenticatorFeePayer =class n extends ie{constructor(e,r,o,i){super();this.sender=e,this.secondary_signer_addresses=r,this.secondary_signers=o,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let r=D.deserialize(e),o=e.deserializeVector(u),i=e.deserializeVector(D),s=u.deserialize(e),a=D.deserialize(e),c={address:s,authenticator:a};return new n(r,o,i,c)}},Le= exports.TransactionAuthenticatorSingleSender =class n extends ie{constructor(e){super();this.sender=e}serialize(e){e.serializeU32AsUleb128(4),this.sender.serialize(e)}static load(e){let r=D.deserialize(e);return new n(r)}};var He=class n extends p{constructor(e){super();this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let r=e.deserializeU8();return new n(r)}};var S=class n extends p{constructor(e){super();this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let r=e.deserializeStr();return new n(r)}};var pt=class n extends p{constructor(e,r){super();this.address=e,this.name=r}static fromStr(e){let r=e.split("::");if(r.length!==2)throw new Error("Invalid module id.");return new n(u.fromStringRelaxed(r[0]),new S(r[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let r=u.deserialize(e),o=S.deserialize(e);return new n(r,o)}};var U=class extends p{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Ve.load(t);case 1:return Qe.load(t);case 2:return Xe.load(t);case 3:return Ye.load(t);case 4:return Je.load(t);case 5:return Ee.load(t);case 6:return tt.load(t);case 7:return fe.load(t);case 8:return We.load(t);case 9:return je.load(t);case 10:return Ze.load(t);case 255:return et.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${e}`)}}isBool(){return this instanceof Ve}isAddress(){return this instanceof Je}isGeneric(){return this instanceof et}isSigner(){return this instanceof Ee}isVector(){return this instanceof tt}isStruct(){return this instanceof fe}isU8(){return this instanceof Qe}isU16(){return this instanceof We}isU32(){return this instanceof je}isU64(){return this instanceof Xe}isU128(){return this instanceof Ye}isU256(){return this instanceof Ze}},Ve= exports.TypeTagBool =class n extends U{toString(){return"bool"}serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new n}},Qe= exports.TypeTagU8 =class n extends U{toString(){return"u8"}serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new n}},We= exports.TypeTagU16 =class n extends U{toString(){return"u16"}serialize(t){t.serializeU32AsUleb128(8)}static load(t){return new n}},je= exports.TypeTagU32 =class n extends U{toString(){return"u32"}serialize(t){t.serializeU32AsUleb128(9)}static load(t){return new n}},Xe= exports.TypeTagU64 =class n extends U{toString(){return"u64"}serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new n}},Ye= exports.TypeTagU128 =class n extends U{toString(){return"u128"}serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new n}},Ze= exports.TypeTagU256 =class n extends U{toString(){return"u256"}serialize(t){t.serializeU32AsUleb128(10)}static load(t){return new n}},Je= exports.TypeTagAddress =class n extends U{toString(){return"address"}serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new n}},Ee= exports.TypeTagSigner =class n extends U{toString(){return"signer"}serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new n}},nn= exports.TypeTagReference =class n extends U{constructor(e){super();this.value=e}toString(){return`&${this.value.toString()}`}serialize(e){e.serializeU32AsUleb128(254)}static load(e){let r=U.deserialize(e);return new n(r)}},et= exports.TypeTagGeneric =class n extends U{constructor(e){super();this.value=e}toString(){return`T${this.value}`}serialize(e){e.serializeU32AsUleb128(255),e.serializeU32(this.value)}static load(e){let r=e.deserializeU32();return new n(r)}},tt= exports.TypeTagVector =class n extends U{constructor(e){super();this.value=e}toString(){return`vector<${this.value.toString()}>`}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){let r=U.deserialize(e);return new n(r)}},fe= exports.TypeTagStruct =class n extends U{constructor(e){super();this.value=e}toString(){let e="";return this.value.typeArgs.length>0&&(e=`<${this.value.typeArgs.map(r=>r.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${e}`}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){let r=se.deserialize(e);return new n(r)}isTypeTag(e,r,o){return this.value.moduleName.identifier===r&&this.value.name.identifier===o&&this.value.address.equals(e)}isString(){return this.isTypeTag(u.ONE,"string","String")}isOption(){return this.isTypeTag(u.ONE,"option","Option")}isObject(){return this.isTypeTag(u.ONE,"object","Object")}},se= exports.StructTag =class n extends p{constructor(e,r,o,i){super();this.address=e,this.moduleName=r,this.name=o,this.typeArgs=i}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let r=u.deserialize(e),o=S.deserialize(e),i=S.deserialize(e),s=e.deserializeVector(U);return new n(r,o,i,s)}};function zd(){return new se(u.ONE,new S("aptos_coin"),new S("AptosCoin"),[])}function kd(){return new se(u.ONE,new S("string"),new S("String"),[])}function Nd(n){return new se(u.ONE,new S("option"),new S("Option"),[n])}function Od(n){return new se(u.ONE,new S("object"),new S("Object"),[n])}function zi(n){let t=n.deserializeUleb128AsU32();switch(t){case 0:return k.deserialize(n);case 1:return P.deserialize(n);case 2:return H.deserialize(n);case 3:return u.deserialize(n);case 4:return T.deserialize(n,k);case 5:return x.deserialize(n);case 6:return $.deserialize(n);case 7:return L.deserialize(n);case 8:return V.deserialize(n);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${t}`)}}var Ie=class extends p{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return lt.load(t);case 2:return gt.load(t);case 3:return mt.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},lt= exports.TransactionPayloadScript =class n extends Ie{constructor(e){super();this.script=e}serialize(e){e.serializeU32AsUleb128(0),this.script.serialize(e)}static load(e){let r=yt.deserialize(e);return new n(r)}},gt= exports.TransactionPayloadEntryFunction =class n extends Ie{constructor(e){super();this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(2),this.entryFunction.serialize(e)}static load(e){let r=nt.deserialize(e);return new n(r)}},mt= exports.TransactionPayloadMultisig =class n extends Ie{constructor(e){super();this.multiSig=e}serialize(e){e.serializeU32AsUleb128(3),this.multiSig.serialize(e)}static load(e){let r=ft.deserialize(e);return new n(r)}},nt= exports.EntryFunction =class n{constructor(t,e,r,o){this.module_name=t,this.function_name=e,this.type_args=r,this.args=o}static build(t,e,r,o){return new n(pt.fromStr(t),new S(e),r,o)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),t.serializeVector(this.type_args),t.serializeU32AsUleb128(this.args.length),this.args.forEach(e=>{e.serializeForEntryFunction(t)})}static deserialize(t){let e=pt.deserialize(t),r=S.deserialize(t),o=t.deserializeVector(U),i=t.deserializeUleb128AsU32(),s=new Array;for(let a=0;a<i;a+=1){let c=t.deserializeUleb128AsU32(),d=Dt.deserialize(t,c);s.push(d)}return new n(e,r,o,s)}},yt= exports.Script =class n{constructor(t,e,r){this.bytecode=t,this.type_args=e,this.args=r}serialize(t){t.serializeBytes(this.bytecode),t.serializeVector(this.type_args),t.serializeU32AsUleb128(this.args.length),this.args.forEach(e=>{e.serializeForScriptFunction(t)})}static deserialize(t){let e=t.deserializeBytes(),r=t.deserializeVector(U),o=t.deserializeUleb128AsU32(),i=new Array;for(let s=0;s<o;s+=1){let a=zi(t);i.push(a)}return new n(e,r,i)}},ft= exports.MultiSig =class n{constructor(t,e){this.multisig_address=t,this.transaction_payload=e}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){let e=u.deserialize(t),r=t.deserializeBool(),o;return r&&(o=At.deserialize(t)),new n(e,o)}},At= exports.MultisigTransactionPayload =class n{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new n(nt.deserialize(t))}};var ae=class n extends p{constructor(e,r,o,i,s,a,c){super();this.sender=e,this.sequence_number=r,this.payload=o,this.max_gas_amount=i,this.gas_unit_price=s,this.expiration_timestamp_secs=a,this.chain_id=c}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let r=u.deserialize(e),o=e.deserializeU64(),i=Ie.deserialize(e),s=e.deserializeU64(),a=e.deserializeU64(),c=e.deserializeU64(),d=He.deserialize(e);return new n(r,o,i,s,a,c,d)}},rn= exports.RawTransactionWithData =class extends p{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Ae.load(t);case 1:return he.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},Ae= exports.MultiAgentRawTransaction =class n extends rn{constructor(e,r){super();this.raw_txn=e,this.secondary_signer_addresses=r}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let r=ae.deserialize(e),o=e.deserializeVector(u);return new n(r,o)}},he= exports.FeePayerRawTransaction =class n extends rn{constructor(e,r,o){super();this.raw_txn=e,this.secondary_signer_addresses=r,this.fee_payer_address=o}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let r=ae.deserialize(e),o=e.deserializeVector(u),i=u.deserialize(e);return new n(r,o,i)}};var Z=class n extends p{constructor(e,r){super();this.raw_txn=e,this.authenticator=r}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let r=ae.deserialize(e),o=ie.deserialize(e);return new n(r,o)}};function po(n){return!!n.match(/^[_a-zA-Z0-9]+$/)}function lo(n){return!!n.match(/\s/)}function ki(n){return!!n.match(/^T[0-9]+$/)}function Ni(n,t){let e=t;for(;e<n.length;e+=1){let r=n[e];if(!lo(r))break}return e}var Oi=(A=>(A.InvalidTypeTag="unknown type",A.UnexpectedGenericType="unexpected generic type",A.UnexpectedTypeArgumentClose="unexpected '>'",A.UnexpectedWhitespaceCharacter="unexpected whitespace character",A.UnexpectedComma="unexpected ','",A.TypeArgumentCountMismatch="type argument count doesn't match expected amount",A.MissingTypeArgumentClose="no matching '>' for '<'",A.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",A.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",A.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",A.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",A.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters",A))(Oi||{}),_= exports.TypeTagParserError =class extends Error{constructor(t,e){super(`Failed to parse typeTag '${t}', ${e}`)}};function ht(n,t){let e=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _76 => _76.allowGenerics]), () => (!1)),r=[],o=[],i=[],s=0,a="",c=1;for(;s<n.length;){let d=n[s];if(d==="<")r.push({savedExpectedTypes:c,savedStr:a,savedTypes:i}),a="",i=[],c=1;else if(d===">"){if(a!==""){let it=on(a,o,e);i.push(it)}let y=r.pop();if(y===void 0)throw new _(n,"unexpected '>'");if(c!==i.length)throw new _(n,"type argument count doesn't match expected amount");let{savedStr:z,savedTypes:A,savedExpectedTypes:g}=y;o=i,i=A,a=z,c=g}else if(d===","){if(a.length!==0){let y=on(a,o,e);o=[],i.push(y),a="",c+=1}}else if(lo(d)){let y=!1;if(a.length!==0){let A=on(a,o,e);o=[],i.push(A),a="",y=!0}s=Ni(n,s);let z=n[s];if(s<n.length&&y&&z!==","&&z!==">")throw new _(n,"unexpected whitespace character");continue}else a+=d;s+=1}if(r.length>0)throw new _(n,"no matching '>' for '<'");switch(i.length){case 0:return on(a,o,e);case 1:if(a==="")return i[0];throw new _(n,"unexpected ','");default:throw new _(n,"unexpected whitespace character")}}function on(n,t,e){switch(n){case"&signer":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new nn(new Ee);case"signer":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new Ee;case"bool":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new Ve;case"address":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new Je;case"u8":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new Qe;case"u16":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new We;case"u32":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new je;case"u64":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new Xe;case"u128":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new Ye;case"u256":if(t.length>0)throw new _(n,"primitive types not expected to have type arguments");return new Ze;case"vector":if(t.length!==1)throw new _(n,"vector type expected to have exactly one type argument");return new tt(t[0]);default:if(ki(n)){if(e)return new et(Number(n.split("T")[1]));throw new _(n,"unexpected generic type")}if(!n.match(/.*:.*/))throw new _(n,"unknown type");let r=n.split("::");if(r.length!==3)throw new _(n,"unexpected struct format, must be of the form 0xaddress::module_name::struct_name");if(!po(r[1]))throw new _(n,"module name must only contain alphanumeric or '_' characters");if(!po(r[2]))throw new _(n,"struct name must only contain alphanumeric or '_' characters");return new fe(new se(u.fromStringRelaxed(r[0]),new S(r[1]),new S(r[2]),t))}}function go(n){return typeof n=="boolean"}function rt(n){return typeof n=="string"}function sn(n){return typeof n=="number"}function an(n){return typeof n=="number"||typeof n=="bigint"||typeof n=="string"}function mo(n){return n==null}function Nn(n){return n instanceof x}function cn(n){return n instanceof u}function On(n){return n instanceof E}function yo(n){return n instanceof we}function Gn(n){return n instanceof k}function Bn(n){return n instanceof $}function Mn(n){return n instanceof L}function Dn(n){return n instanceof P}function Fn(n){return n instanceof H}function qn(n){return n instanceof V}function Kn(n){return"bytecode"in n}function w(n,t){throw new Error(`Type mismatch for argument ${t}, expected '${n}'`)}function fo(n){let t=n.params.findIndex(e=>e!=="signer"&&e!=="&signer");return t<0?n.params.length:t}function $n(n){let t=n.split("::");if(t.length!==3)throw new Error(`Invalid function ${n}`);let e=t[0],r=t[1],o=t[2];return{moduleAddress:e,moduleName:r,functionName:o}}function Ao(n){return _nullishCoalesce(_optionalChain([n, 'optionalAccess', _77 => _77.map, 'call', _78 => _78(t=>rt(t)?ht(t):t)]), () => ([]))}async function ho(n,t,e,r){let i=await _asyncOptionalChain([(await Wt({aptosConfig:r,accountAddress:n,moduleName:t})), 'access', async _79 => _79.abi, 'optionalAccess', async _80 => _80.exposed_functions, 'access', async _81 => _81.find, 'call', async _82 => _82(c=>c.name===e)]);if(!i)throw new Error(`Could not find entry function ABI for '${n}::${t}::${e}'`);if(!i.is_entry)throw new Error(`'${n}::${t}::${e}' is not an entry function`);let s=fo(i),a=[];for(let c=s;c<i.params.length;c+=1)a.push(ht(i.params[c],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:a}}function To(n,t,e,r,o){if(r>=t.parameters.length)throw new Error(`Too many arguments for '${n}', expected ${t.parameters.length}`);return Nn(e)||Gn(e)||Bn(e)||Mn(e)||Dn(e)||Fn(e)||qn(e)||cn(e)||On(e)||yo(e)||e instanceof T||e instanceof Se?(Gi(t,e,r),e):un(e,t.parameters[r],r,o)}function un(n,t,e,r){if(t.isBool()){if(go(n))return new x(n);w("boolean",e)}if(t.isAddress()){if(rt(n))return u.fromStringRelaxed(n);w("string",e)}if(t.isU8()){if(sn(n))return new k(n);w("number",e)}if(t.isU16()){if(sn(n))return new $(n);w("number",e)}if(t.isU32()){if(sn(n))return new L(n);w("number",e)}if(t.isU64()){if(an(n))return new P(BigInt(n));w("bigint | number | string",e)}if(t.isU128()){if(an(n))return new H(BigInt(n));w("bigint | number | string",e)}if(t.isU256()){if(an(n))return new V(BigInt(n));w("bigint | number | string",e)}if(t.isGeneric()){let o=t.value;if(o<0||o>=r.length)throw new Error(`Generic argument ${t.toString()} is invalid for argument ${e}`);un(n,r[o],e,r)}if(t.isVector()){if(t.value.isU8()&&rt(n))return T.U8(m.fromHexInput(n).toUint8Array());if(Array.isArray(n))return new T(n.map(o=>un(o,t.value,e,r)));throw new Error(`Type mismatch for argument ${e}, type '${t.toString()}'`)}if(t.isStruct()){if(t.isString()){if(rt(n))return new E(n);w("string",e)}if(t.isObject()){if(rt(n))return u.fromStringRelaxed(n);w("string",e)}if(t.isOption())return mo(n)?new Se(null):new Se(un(n,t.value.typeArgs[0],e,r));throw new Error(`Unsupported struct input type for argument ${e}, type '${t.toString()}'`)}throw new Error(`Type mismatch for argument ${e}, type '${t.toString()}'`)}function Gi(n,t,e){let r=n.parameters[e];if(r.isBool()){if(Nn(t))return;w("Bool",e)}if(r.isAddress()){if(cn(t))return;w("AccountAddress",e)}if(r.isU8()){if(Gn(t))return;w("U8",e)}if(r.isU16()){if(Bn(t))return;w("U16",e)}if(r.isU32()){if(Mn(t))return;w("U32",e)}if(r.isU64()){if(Dn(t))return;w("U64",e)}if(r.isU128()){if(Fn(t))return;w("U128",e)}if(r.isU256()){if(qn(t))return;w("U256",e)}if(r.isVector()){if(t instanceof T)return;w("MoveVector",e)}if(r instanceof fe){if(r.isString()){if(On(t))return;w("MoveString",e)}if(r.isObject()){if(cn(t))return;w("AccountAddress",e)}if(r.isOption()){if(t instanceof Se)return;w("MoveOption",e)}}throw new Error(`Type mismatch for argument ${e}, expected '${r.toString()}'`)}async function pn(n){if(Kn(n))return bo(n);let{moduleAddress:t,moduleName:e,functionName:r}=$n(n.function),o=await Fe(async()=>ho(t,e,r,n.aptosConfig),`entry-function-${n.aptosConfig.network}-${t}-${e}-${r}`,1e3*60*5)();return Mi(n,o)}function Mi(n,t){if(Kn(n))return bo(n);let{moduleAddress:e,moduleName:r,functionName:o}=$n(n.function),i=Ao(n.typeArguments);if(i.length!==t.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${t.typeParameters.length}, received ${i.length}`);let s=n.functionArguments.map((c,d)=>To(n.function,t,c,d,i));if(s.length!==t.parameters.length)throw new Error(`Too few arguments for '${e}::${r}::${o}', expected ${t.parameters.length} but got ${s.length}`);let a=nt.build(`${e}::${r}`,o,i,s);if("multisigAddress"in n){let c;return typeof n.multisigAddress=="string"?c=u.from(n.multisigAddress):c=n.multisigAddress,new mt(new ft(c,new At(a)))}return new gt(a)}function bo(n){return new lt(new yt(m.fromHexInput(n.bytecode).toUint8Array(),_nullishCoalesce(n.typeArguments, () => ([])),n.functionArguments))}async function Di(n){let{aptosConfig:t,sender:e,payload:r,options:o}=n,i=_optionalChain([o, 'optionalAccess', _83 => _83.accountSequenceNumber])?Promise.resolve({sequence_number:o.accountSequenceNumber}):Pe({aptosConfig:t,accountAddress:e}),s=Tn[t.network]?Promise.resolve({chain_id:Tn[t.network]}):Lt({aptosConfig:t}),a=_optionalChain([o, 'optionalAccess', _84 => _84.gasUnitPrice])?Promise.resolve({gas_estimate:o.gasUnitPrice}):Xt({aptosConfig:t}),[{sequence_number:c},{chain_id:d},{gas_estimate:y}]=await Promise.all([i,s,a]),{maxGasAmount:z,gasUnitPrice:A,expireTimestamp:g}={maxGasAmount:_optionalChain([o, 'optionalAccess', _85 => _85.maxGasAmount])?BigInt(o.maxGasAmount):BigInt(lr),gasUnitPrice:BigInt(y),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+gr),...o};return new ae(u.fromRelaxed(e),BigInt(c),r,BigInt(z),BigInt(A),BigInt(g),new He(d))}async function Ln(n){let{aptosConfig:t,sender:e,payload:r,options:o}=n,i=await Di({aptosConfig:t,sender:e,payload:r,options:o});if("secondarySignerAddresses"in n){let s=_nullishCoalesce(_optionalChain([n, 'access', _86 => _86.secondarySignerAddresses, 'optionalAccess', _87 => _87.map, 'call', _88 => _88(a=>u.fromRelaxed(a))]), () => ([]));return{rawTransaction:i,secondarySignerAddresses:s,feePayerAddress:n.feePayerAddress?u.fromRelaxed(n.feePayerAddress):void 0}}return{rawTransaction:i,feePayerAddress:n.feePayerAddress?u.fromRelaxed(n.feePayerAddress):void 0}}function _o(n){let{signerPublicKey:t,transaction:e,secondarySignersPublicKeys:r,feePayerPublicKey:o}=n,i=dn(t);if(e.feePayerAddress){let a=new he(e.rawTransaction,_nullishCoalesce(e.secondarySignerAddresses, () => ([])),e.feePayerAddress),c=[];r&&(c=r.map(z=>dn(z)));let d=dn(o),y=new $e(i,_nullishCoalesce(e.secondarySignerAddresses, () => ([])),c,{address:e.feePayerAddress,authenticator:d});return new Z(a.raw_txn,y).bcsToBytes()}if(e.secondarySignerAddresses){let a=new Ae(e.rawTransaction,e.secondarySignerAddresses),c=[];c=r.map(y=>dn(y));let d=new Ke(i,e.secondarySignerAddresses,c);return new Z(a.raw_txn,d).bcsToBytes()}let s;if(i instanceof ye)s=new qe(i.public_key,i.signature);else if(i instanceof oe)s=new Le(i);else throw new Error("Invalid public key");return new Z(e.rawTransaction,s).bcsToBytes()}function dn(n){if(n instanceof C){if(n.publicKey instanceof b)return new oe(n,new re(new v(new Uint8Array(64))));if(n.publicKey instanceof X)return new oe(n,new re(new le(new Uint8Array(64))))}return new ye(new b(n.toUint8Array()),new v(new Uint8Array(64)))}function wo(n){let{signer:t,transaction:e}=n,r=xo(e),o=qi(r),i=t.sign(o);switch(t.signingScheme){case 0:return new ye(new b(t.publicKey.toUint8Array()),new v(i.toUint8Array()));case 2:return new oe(t.publicKey,new re(i));default:throw new Error(`Cannot sign transaction, signing scheme ${t.signingScheme} not supported`)}}function So(n){let{transaction:t,senderAuthenticator:e,feePayerAuthenticator:r,additionalSignersAuthenticators:o}=n,i=xo(t);if(r||o)return Fi(i,e,r,o);if(e instanceof ye){let s=new qe(e.public_key,e.signature);return new Z(i,s).bcsToBytes()}if(e instanceof oe||e instanceof dt){let s=new Le(e);return new Z(i,s).bcsToBytes()}throw new Error(`Cannot generate a signed transaction, ${e} is not a supported account authentication scheme`)}function xo(n){return n.feePayerAddress?new he(n.rawTransaction,_nullishCoalesce(n.secondarySignerAddresses, () => ([])),n.feePayerAddress):n.secondarySignerAddresses?new Ae(n.rawTransaction,n.secondarySignerAddresses):n.rawTransaction}function Fi(n,t,e,r){if(n instanceof he){if(!e)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");let o=new $e(t,n.secondary_signer_addresses,_nullishCoalesce(r, () => ([])),{address:n.fee_payer_address,authenticator:e});return new Z(n.raw_txn,o).bcsToBytes()}if(n instanceof Ae){if(!r)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");let o=new Ke(t,n.secondary_signer_addresses,_nullishCoalesce(r, () => ([])));return new Z(n.raw_txn,o).bcsToBytes()}throw new Error(`Cannot prepare multi signers transaction to submission, ${typeof n} transaction is not supported`)}function qi(n){let t=_sha3.sha3_256.create();if(n instanceof ae)t.update(yr);else if(n instanceof Ae)t.update(bn);else if(n instanceof he)t.update(bn);else throw new Error(`Unknown transaction type to sign on: ${n}`);let e=t.digest(),r=n.bcsToBytes(),o=new Uint8Array(e.length+r.length);return o.set(e),o.set(r,e.length),o}async function I(n){let{aptosConfig:t,sender:e,data:r,options:o}=n,i,s;"bytecode"in r?(i=r,s=await pn(i)):"multisigAddress"in r?(i={aptosConfig:t,multisigAddress:r.multisigAddress,function:r.function,functionArguments:r.functionArguments,typeArguments:r.typeArguments},s=await pn(i)):(i={aptosConfig:t,function:r.function,functionArguments:r.functionArguments,typeArguments:r.typeArguments},s=await pn(i));let a;if(Ki(n)&&(a=u.ZERO.toString()),$i(n)){let{secondarySignerAddresses:c}=n;return Ln({aptosConfig:t,sender:e,payload:s,options:o,secondarySignerAddresses:c,feePayerAddress:a})}return Ln({aptosConfig:t,sender:e,payload:s,options:o,feePayerAddress:a})}function Ki(n){return n.withFeePayer===!0}function $i(n){return"secondarySignerAddresses"in n}function ln(n){return wo({...n})}async function Hn(n){let{aptosConfig:t,transaction:e,signerPublicKey:r,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:s}=n,a=_o({transaction:e,signerPublicKey:r,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:s}),{data:c}=await Oe({aptosConfig:t,body:a,path:"transactions/simulate",params:{estimate_gas_unit_price:_nullishCoalesce(_optionalChain([n, 'access', _89 => _89.options, 'optionalAccess', _90 => _90.estimateGasUnitPrice]), () => (!1)),estimate_max_gas_amount:_nullishCoalesce(_optionalChain([n, 'access', _91 => _91.options, 'optionalAccess', _92 => _92.estimateMaxGasAmount]), () => (!1)),estimate_prioritized_gas_unit_price:_nullishCoalesce(_optionalChain([n, 'access', _93 => _93.options, 'optionalAccess', _94 => _94.estimatePrioritizedGasUnitPrice]), () => (!1))},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return c}async function gn(n){let{aptosConfig:t}=n,e=So({...n}),{data:r}=await Oe({aptosConfig:t,body:e,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return r}async function Vn(n){let{aptosConfig:t,signer:e,transaction:r}=n,o=ln({signer:e,transaction:r});return gn({aptosConfig:t,transaction:r,senderAuthenticator:o})}async function vo(n){let{aptosConfig:t,account:e,metadataBytes:r,moduleBytecode:o,options:i}=n,s=o.map(c=>T.U8(c));return await I({aptosConfig:t,sender:u.fromRelaxed(e),data:{function:"0x1::code::publish_package_txn",functionArguments:[T.U8(r),new T(s)]},options:i})}async function Co(n){let{aptosConfig:t,fromAccount:e,toNewPrivateKey:r}=n,o=await Pe({aptosConfig:t,accountAddress:e.accountAddress}),i=ge.fromPrivateKey({privateKey:r,legacy:!0}),a=new tn({sequenceNumber:BigInt(o.sequence_number),originator:e.accountAddress,currentAuthKey:u.from(o.authentication_key),newPublicKey:i.publicKey}).bcsToBytes(),c=e.sign(a),d=i.sign(a),y=await I({aptosConfig:t,sender:e.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new k(e.signingScheme.valueOf()),T.U8(e.publicKey.toUint8Array()),new k(i.signingScheme.valueOf()),T.U8(i.publicKey.toUint8Array()),T.U8(c.toUint8Array()),T.U8(d.toUint8Array())]}});return await Vn({aptosConfig:t,signer:e,transaction:y})}async function Uo(n){let{aptosConfig:t,sender:e,recipient:r,amount:o,coinType:i,options:s}=n,a=_nullishCoalesce(i, () => (mr));return await I({aptosConfig:t,sender:e.accountAddress,data:{function:"0x1::aptos_account::transfer_coins",typeArguments:[ht(a)],functionArguments:[u.from(r),new P(o)]},options:s})}var Tt=class{constructor(t){this.config=t}async transferCoinTransaction(t){return Uo({aptosConfig:this.config,...t})}};async function Po(n){let{aptosConfig:t,options:e,creator:r}=n;return await I({aptosConfig:t,sender:r.accountAddress,data:{function:"0x4::aptos_token::mint",functionArguments:[new E(n.collection),new E(n.description),new E(n.name),new E(n.uri),T.MoveString([]),T.MoveString([]),new T([])]},options:e})}async function Eo(n){let{aptosConfig:t,tokenAddress:e}=n,r={token_data_id:{_eq:u.from(e).toStringLong()}};return(await l({aptosConfig:t,query:{query:$r,variables:{where_condition:r}},originMethod:"getTokenData"})).current_token_datas_v2[0]}async function Io(n){let{aptosConfig:t,tokenAddress:e}=n,r={token_data_id:{_eq:u.from(e).toStringLong()}};return(await l({aptosConfig:t,query:{query:Cn,variables:{where_condition:r}},originMethod:"getCurrentTokenOwnership"})).current_token_ownerships_v2[0]}async function Ro(n){let{aptosConfig:t,ownerAddress:e,options:r}=n,o={owner_address:{_eq:u.from(e).toStringLong()}},i={query:Cn,variables:{where_condition:o,offset:_optionalChain([r, 'optionalAccess', _95 => _95.pagination, 'optionalAccess', _96 => _96.offset]),limit:_optionalChain([r, 'optionalAccess', _97 => _97.pagination, 'optionalAccess', _98 => _98.limit]),order_by:_optionalChain([r, 'optionalAccess', _99 => _99.orderBy])}};return(await l({aptosConfig:t,query:i,originMethod:"getOwnedTokens"})).current_token_ownerships_v2}async function zo(n){let{aptosConfig:t,tokenAddress:e,options:r}=n,o={token_data_id:{_eq:u.from(e).toStringLong()}},i={query:Kr,variables:{where_condition:o,offset:_optionalChain([r, 'optionalAccess', _100 => _100.pagination, 'optionalAccess', _101 => _101.offset]),limit:_optionalChain([r, 'optionalAccess', _102 => _102.pagination, 'optionalAccess', _103 => _103.limit]),order_by:_optionalChain([r, 'optionalAccess', _104 => _104.orderBy])}};return(await l({aptosConfig:t,query:i,originMethod:"getTokenActivity"})).token_activities_v2}async function ko(n){let{aptosConfig:t,options:e,creator:r}=n;return await I({aptosConfig:t,sender:r.accountAddress,data:{function:"0x4::aptos_token::create_collection",functionArguments:[new E(n.description),new P(_nullishCoalesce(n.maxSupply, () => (be))),new E(n.name),new E(n.uri),new x(_nullishCoalesce(n.mutableDescription, () => (!0))),new x(_nullishCoalesce(n.mutableRoyalty, () => (!0))),new x(_nullishCoalesce(n.mutableURI, () => (!0))),new x(_nullishCoalesce(n.mutableTokenDescription, () => (!0))),new x(_nullishCoalesce(n.mutableTokenName, () => (!0))),new x(_nullishCoalesce(n.mutableTokenProperties, () => (!0))),new x(_nullishCoalesce(n.mutableTokenURI, () => (!0))),new x(_nullishCoalesce(n.tokensBurnableByCreator, () => (!0))),new x(_nullishCoalesce(n.tokensFreezableByCreator, () => (!0))),new P(_nullishCoalesce(n.royaltyNumerator, () => (0))),new P(_nullishCoalesce(n.royaltyDenominator, () => (1)))]},options:e})}async function Qn(n){let{aptosConfig:t,creatorAddress:e,collectionName:r,options:o}=n,i=u.from(e),s={collection_name:{_eq:r},creator_address:{_eq:i.toStringLong()}};return _optionalChain([o, 'optionalAccess', _105 => _105.tokenStandard])&&(s.token_standard={_eq:_nullishCoalesce(_optionalChain([o, 'optionalAccess', _106 => _106.tokenStandard]), () => ("v2"))}),(await l({aptosConfig:t,query:{query:Gr,variables:{where_condition:s}},originMethod:"getCollectionData"})).current_collections_v2[0]}async function No(n){return(await Qn(n)).collection_id}var bt=class{constructor(t){this.config=t}async createCollectionTransaction(t){return ko({aptosConfig:this.config,...t})}async getCollectionData(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:ot(_optionalChain([t, 'access', _107 => _107.options, 'optionalAccess', _108 => _108.tokenStandard]))}),Qn({aptosConfig:this.config,...t})}async getCollectionId(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:ot(_optionalChain([t, 'access', _109 => _109.options, 'optionalAccess', _110 => _110.tokenStandard]))}),No({aptosConfig:this.config,...t})}async mintTokenTransaction(t){return Po({aptosConfig:this.config,...t})}async getTokenData(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:ot(void 0)}),Eo({aptosConfig:this.config,...t})}async getCurrentTokenOwnership(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:ot(void 0)}),Io({aptosConfig:this.config,...t})}async getOwnedTokens(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:ot(void 0)}),Ro({aptosConfig:this.config,...t})}async getTokenActivity(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:ot(void 0)}),zo({aptosConfig:this.config,...t})}};function ot(n){switch(n){case"v1":return["token_processor"];case"v2":return["token_v2_processor"];default:return["token_processor","token_v2_processor"]}}async function Oo(n){let{accountAddress:t,aptosConfig:e,creationNumber:r}=n,i={account_address:{_eq:u.from(t).toStringLong()},creation_number:{_eq:r}};return mn({aptosConfig:e,options:{where:i}})}async function Go(n){let{accountAddress:t,aptosConfig:e,eventType:r,options:o}=n,a={where:{account_address:{_eq:u.fromRelaxed(t).toStringLong()},indexed_type:{_eq:r}},pagination:_optionalChain([o, 'optionalAccess', _111 => _111.pagination]),orderBy:_optionalChain([o, 'optionalAccess', _112 => _112.orderBy])};return mn({aptosConfig:e,options:a})}async function mn(n){let{aptosConfig:t,options:e}=n,r={query:Dr,variables:{where_condition:_optionalChain([e, 'optionalAccess', _113 => _113.where]),offset:_optionalChain([e, 'optionalAccess', _114 => _114.pagination, 'optionalAccess', _115 => _115.offset]),limit:_optionalChain([e, 'optionalAccess', _116 => _116.pagination, 'optionalAccess', _117 => _117.limit]),order_by:_optionalChain([e, 'optionalAccess', _118 => _118.orderBy])}};return(await l({aptosConfig:t,query:r,originMethod:"getEvents"})).events}var _t=class{constructor(t){this.config=t}async getAccountEventsByCreationNumber(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["events_processor"]}),Oo({aptosConfig:this.config,...t})}async getAccountEventsByEventType(t){return await f({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorTypes:["events_processor"]}),Go({aptosConfig:this.config,...t})}async getEvents(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _119 => _119.minimumLedgerVersion]),processorTypes:["events_processor"]}),mn({aptosConfig:this.config,...t})}};async function Bo(n){let{aptosConfig:t,accountAddress:e,amount:r,options:o}=n,i=_optionalChain([o, 'optionalAccess', _120 => _120.timeoutSecs])||Ot,{data:s}=await Ar({aptosConfig:t,path:"fund",body:{address:u.fromRelaxed(e).toString(),amount:r},originMethod:"fundAccount"}),a=s.txn_hashes[0],c=await Zt({aptosConfig:t,transactionHash:a,options:{timeoutSecs:i,checkSuccess:_optionalChain([o, 'optionalAccess', _121 => _121.checkSuccess])}});if(c.type==="user_transaction")return c;throw new Error(`Unexpected transaction received for fund account: ${c.type}`)}var wt=class{constructor(t){this.config=t}async fundAccount(t){let e=await Bo({aptosConfig:this.config,...t});return _optionalChain([t, 'access', _122 => _122.options, 'optionalAccess', _123 => _123.waitForIndexer])!==!1&&await Jt({aptosConfig:this.config,minimumLedgerVersion:BigInt(e.version)}),e}};async function Wn(n){let{aptosConfig:t,options:e}=n,r={query:qr,variables:{where_condition:_optionalChain([e, 'optionalAccess', _124 => _124.where]),limit:_optionalChain([e, 'optionalAccess', _125 => _125.pagination, 'optionalAccess', _126 => _126.limit]),offset:_optionalChain([e, 'optionalAccess', _127 => _127.pagination, 'optionalAccess', _128 => _128.offset])}};return(await l({aptosConfig:t,query:r,originMethod:"getFungibleAssetMetadata"})).fungible_asset_metadata}async function Mo(n){let{aptosConfig:t,options:e}=n,r={query:Fr,variables:{where_condition:_optionalChain([e, 'optionalAccess', _129 => _129.where]),limit:_optionalChain([e, 'optionalAccess', _130 => _130.pagination, 'optionalAccess', _131 => _131.limit]),offset:_optionalChain([e, 'optionalAccess', _132 => _132.pagination, 'optionalAccess', _133 => _133.offset])}};return(await l({aptosConfig:t,query:r,originMethod:"getFungibleAssetActivities"})).fungible_asset_activities}async function Do(n){let{aptosConfig:t,options:e}=n,r={query:Br,variables:{where_condition:_optionalChain([e, 'optionalAccess', _134 => _134.where]),limit:_optionalChain([e, 'optionalAccess', _135 => _135.pagination, 'optionalAccess', _136 => _136.limit]),offset:_optionalChain([e, 'optionalAccess', _137 => _137.pagination, 'optionalAccess', _138 => _138.offset])}};return(await l({aptosConfig:t,query:r,originMethod:"getCurrentFungibleAssetBalances"})).current_fungible_asset_balances}var St=class{constructor(t){this.config=t}async getFungibleAssetMetadata(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _139 => _139.minimumLedgerVersion]),processorTypes:["fungible_asset_processor"]}),Wn({aptosConfig:this.config,...t})}async getFungibleAssetMetadataByAssetType(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _140 => _140.minimumLedgerVersion]),processorTypes:["fungible_asset_processor"]}),(await Wn({aptosConfig:this.config,options:{where:{asset_type:{_eq:t.assetType}}}}))[0]}async getFungibleAssetActivities(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _141 => _141.minimumLedgerVersion]),processorTypes:["fungible_asset_processor"]}),Mo({aptosConfig:this.config,...t})}async getCurrentFungibleAssetBalances(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _142 => _142.minimumLedgerVersion]),processorTypes:["fungible_asset_processor"]}),Do({aptosConfig:this.config,...t})}};var xt=class{constructor(t){this.config=t}async getLedgerInfo(){return Lt({aptosConfig:this.config})}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getBlockByVersion(t){return Lr({aptosConfig:this.config,...t})}async getBlockByHeight(t){return Hr({aptosConfig:this.config,...t})}async getTableItem(t){return Ht({aptosConfig:this.config,...t})}async view(t){return me({aptosConfig:this.config,...t})}async getChainTopUserTransactions(t){return Vr({aptosConfig:this.config,...t})}async queryIndexer(t){return l({aptosConfig:this.config,...t})}async getIndexerLastSuccessVersion(){return Vt({aptosConfig:this.config})}async getProcessorStatus(t){return Qt({aptosConfig:this.config,processorType:t})}};var Fo=["A name must be between 3 and 63 characters long,","and can only contain lowercase a-z, 0-9, and hyphens.","A name may not start or end with a hyphen."].join(" ");function qo(n){return!(!n||n.length<3||n.length>63||!/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/.test(n))}function Te(n){let[t,e,...r]=n.replace(/\.apt$/,"").split(".");if(r.length>0)throw new Error(`${n} is invalid. A name can only have two parts, a domain and a subdomain separated by a "."`);if(!qo(t))throw new Error(`${t} is not valid. ${Fo}`);if(e&&!qo(e))throw new Error(`${e} is not valid. ${Fo}`);return{domainName:e||t,subdomainName:e?t:void 0}}var Li="0x585fc9f0f0c54183b039ffc770ca282ebd87307916c215a3e692f2f8e4305e82",Hi={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c",local:Li,custom:null,devnet:null};function ce(n){let t=Hi[n.network];if(!t)throw new Error(`The ANS contract is not deployed to ${n.network}`);return t}var Vi=n=>({vec:[n]}),Qi=()=>({vec:[]}),jn=n=>n!=null?Vi(n):Qi(),yn=n=>{if(n&&typeof n=="object"&&"vec"in n&&Array.isArray(n.vec))return n.vec[0]};async function Ko(n){let{aptosConfig:t,name:e}=n,r=ce(t),{domainName:o,subdomainName:i}=Te(e),s=await me({aptosConfig:t,payload:{function:`${r}::router::get_owner_addr`,functionArguments:[o,jn(i)]}}),a=yn(s[0]);return a?u.fromRelaxed(a).toString():void 0}async function $o(n){let{aptosConfig:t,expiration:e,name:r,sender:o,targetAddress:i,toAddress:s,options:a,transferable:c}=n,d=ce(t),{domainName:y,subdomainName:z}=Te(r),A=e.policy==="subdomain:independent"||e.policy==="subdomain:follow-domain";if(z&&!A)throw new Error("Subdomains must have an expiration policy of either 'subdomain:independent' or 'subdomain:follow-domain'");if(A&&!z)throw new Error(`Policy is set to ${e.policy} but no subdomain was provided`);if(e.policy==="domain"){let Zn=_nullishCoalesce(e.years, () => (1));if(Zn!==1)throw new Error("For now, names can only be registered for 1 year at a time");let ii=Zn*31536e3;return await I({aptosConfig:t,sender:o.accountAddress.toString(),data:{function:`${d}::router::register_domain`,functionArguments:[y,ii,i,s]},options:a})}if(!z)throw new Error(`${e.policy} requires a subdomain to be provided.`);let g=await Xn({aptosConfig:t,name:y});if(!g)throw new Error("The domain does not exist");let it=e.policy==="subdomain:independent"?e.expirationDate:g;if(it>g)throw new Error("The subdomain expiration time cannot be greater than the domain expiration time");return await I({aptosConfig:t,sender:o.accountAddress.toString(),data:{function:`${d}::router::register_subdomain`,functionArguments:[y,z,Math.round(it/1e3),e.policy==="subdomain:follow-domain"?1:0,!!c,i,s]},options:a})}async function Xn(n){let{aptosConfig:t,name:e}=n,r=ce(t),{domainName:o,subdomainName:i}=Te(e);try{let s=await me({aptosConfig:t,payload:{function:`${r}::router::get_expiration`,functionArguments:[o,jn(i)]}});return Number(s[0])*1e3}catch (e2){return}}async function Lo(n){let{aptosConfig:t,address:e}=n,r=ce(t),o=await me({aptosConfig:t,payload:{function:`${r}::router::get_primary_name`,functionArguments:[u.fromRelaxed(e).toString()]}}),i=yn(o[1]),s=yn(o[0]);if(i)return[s,i].filter(Boolean).join(".")}async function Ho(n){let{aptosConfig:t,sender:e,name:r,options:o}=n,i=ce(t);if(!r)return await I({aptosConfig:t,sender:e.accountAddress.toString(),data:{function:`${i}::router::clear_primary_name`,functionArguments:[]},options:o});let{domainName:s,subdomainName:a}=Te(r);return await I({aptosConfig:t,sender:e.accountAddress.toString(),data:{function:`${i}::router::set_primary_name`,functionArguments:[s,a]},options:o})}async function Vo(n){let{aptosConfig:t,name:e}=n,r=ce(t),{domainName:o,subdomainName:i}=Te(e),s=await me({aptosConfig:t,payload:{function:`${r}::router::get_target_addr`,functionArguments:[o,jn(i)]}}),a=yn(s[0]);return a?u.fromRelaxed(a).toString():void 0}async function Qo(n){let{aptosConfig:t,sender:e,name:r,address:o,options:i}=n,s=ce(t),{domainName:a,subdomainName:c}=Te(r);return await I({aptosConfig:t,sender:e.accountAddress.toString(),data:{function:`${s}::router::set_target_addr`,functionArguments:[a,c,o]},options:i})}async function Wo(n){let{aptosConfig:t,name:e}=n,{domainName:r,subdomainName:o=""}=Te(e),a=(await l({aptosConfig:t,query:{query:De,variables:{where_condition:{domain:{_eq:r},subdomain:{_eq:o}},limit:1}},originMethod:"getName"})).current_aptos_names[0];return a&&(a=vt(a)),a}async function jo(n){let{aptosConfig:t,options:e,accountAddress:r}=n,o=await Yn({aptosConfig:t});return(await l({aptosConfig:t,originMethod:"getAccountNames",query:{query:De,variables:{limit:_optionalChain([e, 'optionalAccess', _143 => _143.pagination, 'optionalAccess', _144 => _144.limit]),offset:_optionalChain([e, 'optionalAccess', _145 => _145.pagination, 'optionalAccess', _146 => _146.offset]),order_by:_optionalChain([e, 'optionalAccess', _147 => _147.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _148 => _148.options, 'optionalAccess', _149 => _149.where]), () => ({})),owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:o}}}}})).current_aptos_names.map(vt)}async function Xo(n){let{aptosConfig:t,options:e,accountAddress:r}=n,o=await Yn({aptosConfig:t});return(await l({aptosConfig:t,originMethod:"getAccountDomains",query:{query:De,variables:{limit:_optionalChain([e, 'optionalAccess', _150 => _150.pagination, 'optionalAccess', _151 => _151.limit]),offset:_optionalChain([e, 'optionalAccess', _152 => _152.pagination, 'optionalAccess', _153 => _153.offset]),order_by:_optionalChain([e, 'optionalAccess', _154 => _154.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _155 => _155.options, 'optionalAccess', _156 => _156.where]), () => ({})),owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:o},subdomain:{_eq:""}}}}})).current_aptos_names.map(vt)}async function Yo(n){let{aptosConfig:t,options:e,accountAddress:r}=n,o=await Yn({aptosConfig:t});return(await l({aptosConfig:t,originMethod:"getAccountSubdomains",query:{query:De,variables:{limit:_optionalChain([e, 'optionalAccess', _157 => _157.pagination, 'optionalAccess', _158 => _158.limit]),offset:_optionalChain([e, 'optionalAccess', _159 => _159.pagination, 'optionalAccess', _160 => _160.offset]),order_by:_optionalChain([e, 'optionalAccess', _161 => _161.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _162 => _162.options, 'optionalAccess', _163 => _163.where]), () => ({})),owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:o},subdomain:{_neq:""}}}}})).current_aptos_names.map(vt)}async function Zo(n){let{aptosConfig:t,options:e,domain:r}=n;return(await l({aptosConfig:t,originMethod:"getDomainSubdomains",query:{query:De,variables:{limit:_optionalChain([e, 'optionalAccess', _164 => _164.pagination, 'optionalAccess', _165 => _165.limit]),offset:_optionalChain([e, 'optionalAccess', _166 => _166.pagination, 'optionalAccess', _167 => _167.offset]),order_by:_optionalChain([e, 'optionalAccess', _168 => _168.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([n, 'access', _169 => _169.options, 'optionalAccess', _170 => _170.where]), () => ({})),domain:{_eq:r},subdomain:{_neq:""}}}}})).current_aptos_names.map(vt)}async function Yn(n){let{aptosConfig:t}=n,e=ce(t),i=(await me({aptosConfig:t,payload:{function:`${e}::config::reregistration_grace_sec`,functionArguments:[]}}))[0]/60/60/24,s=()=>new Date;return new Date(s().setDate(s().getDate()-i)).toISOString()}async function Jo(n){let{aptosConfig:t,sender:e,name:r,years:o=1,options:i}=n,s=ce(t),a=o*31536e3,{domainName:c,subdomainName:d}=Te(r);if(d)throw new Error("Subdomains cannot be renewed");if(o!==1)throw new Error("Currently, only 1 year renewals are supported");return await I({aptosConfig:t,sender:e.accountAddress.toString(),data:{function:`${s}::router::renew_domain`,functionArguments:[c,a]},options:i})}function vt(n){return{...n,expiration_timestamp:new Date(n.expiration_timestamp).valueOf()}}var Ct=class{constructor(t){this.config=t}async getOwnerAddress(t){return Ko({aptosConfig:this.config,...t})}async getExpiration(t){return Xn({aptosConfig:this.config,...t})}async getTargetAddress(t){return Vo({aptosConfig:this.config,...t})}async setTargetAddress(t){return Qo({aptosConfig:this.config,...t})}async getPrimaryName(t){return Lo({aptosConfig:this.config,...t})}async setPrimaryName(t){return Ho({aptosConfig:this.config,...t})}async registerName(t){return $o({aptosConfig:this.config,...t})}async renewDomain(t){return Jo({aptosConfig:this.config,...t})}async getName(t){return Wo({aptosConfig:this.config,...t})}async getAccountNames(t){return jo({aptosConfig:this.config,...t})}async getAccountDomains(t){return Xo({aptosConfig:this.config,...t})}async getAccountSubdomains(t){return Yo({aptosConfig:this.config,...t})}async getDomainSubdomains(t){return Zo({aptosConfig:this.config,...t})}};async function ei(n){let{aptosConfig:t,poolAddress:e}=n,r=u.fromRelaxed(e).toStringLong(),i=await l({aptosConfig:t,query:{query:xn,variables:{where_condition:{pool_address:{_eq:r}}}}});return i.num_active_delegator_per_pool[0]?i.num_active_delegator_per_pool[0].num_active_delegator:0}async function ti(n){let{aptosConfig:t,options:e}=n,r={query:xn,variables:{order_by:_optionalChain([e, 'optionalAccess', _171 => _171.orderBy])}};return(await l({aptosConfig:t,query:r})).num_active_delegator_per_pool}async function ni(n){let{aptosConfig:t,delegatorAddress:e,poolAddress:r}=n,o={query:Mr,variables:{delegatorAddress:u.fromRelaxed(e).toStringLong(),poolAddress:u.fromRelaxed(r).toStringLong()}};return(await l({aptosConfig:t,query:o})).delegated_staking_activities}var Ut=class{constructor(t){this.config=t}async getNumberOfDelegators(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _172 => _172.minimumLedgerVersion]),processorTypes:["stake_processor"]}),ei({aptosConfig:this.config,...t})}async getNumberOfDelegatorsForAllPools(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _173 => _173.minimumLedgerVersion]),processorTypes:["stake_processor"]}),ti({aptosConfig:this.config,...t})}async getDelegatedStakingActivities(t){return await f({config:this.config,minimumLedgerVersion:_optionalChain([t, 'optionalAccess', _174 => _174.minimumLedgerVersion]),processorTypes:["stake_processor"]}),ni({aptosConfig:this.config,...t})}};var Pt=class{constructor(t){this.config=t}async getTransactions(t){return ao({aptosConfig:this.config,...t})}async getTransactionByVersion(t){return co({aptosConfig:this.config,...t})}async getTransactionByHash(t){return Yt({aptosConfig:this.config,...t})}async isPendingTransaction(t){return uo({aptosConfig:this.config,...t})}async waitForTransaction(t){return Zt({aptosConfig:this.config,...t})}async getGasPriceEstimation(){return Xt({aptosConfig:this.config})}};var Et=class{constructor(t){this.config=t}async signAndSubmitTransaction(t){let{signer:e,transaction:r}=t;return Vn({aptosConfig:this.config,signer:e,transaction:r})}async publishPackageTransaction(t){return vo({aptosConfig:this.config,...t})}async rotateAuthKey(t){return Co({aptosConfig:this.config,...t})}};var It=class{constructor(t){this.config=t}async transaction(t){return I({aptosConfig:this.config,...t})}async multiAgentTransaction(t){return I({aptosConfig:this.config,...t})}};var Rt=class{constructor(t){this.config=t}transaction(t){return ln({...t})}transactionAsFeePayer(t){let{signer:e,transaction:r}=t;if(!r.feePayerAddress)throw new Error(`Transaction ${r} is not a Fee Payer transaction`);return r.feePayerAddress=e.accountAddress,ln({signer:e,transaction:r})}};var Re=class{constructor(t){this.config=t}async transaction(t){return Hn({aptosConfig:this.config,...t})}async multiAgentTransaction(t){return Hn({aptosConfig:this.config,...t})}};O([ri],Re.prototype,"transaction",1),O([ri],Re.prototype,"multiAgentTransaction",1);function ri(n,t,e){let r=e.value;return e.value=async function(...o){let[i]=o;if(i.transaction.feePayerAddress&&!i.feePayerPublicKey)throw new Error("You are simulating a Fee Payer transaction but missing the feePayerPublicKey");return r.apply(this,o)},e}var ze=class{constructor(t){this.config=t}async transaction(t){return gn({aptosConfig:this.config,...t})}async multiAgentTransaction(t){return gn({aptosConfig:this.config,...t})}};O([oi],ze.prototype,"transaction",1),O([oi],ze.prototype,"multiAgentTransaction",1);function oi(n,t,e){let r=e.value;return e.value=async function(...o){let[i]=o;if(i.transaction.feePayerAddress&&!i.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator");return r.apply(this,o)},e}var R=class{constructor(t){this.config=new en(t),this.account=new ut(this.config),this.ans=new Ct(this.config),this.coin=new Tt(this.config),this.digitalAsset=new bt(this.config),this.event=new _t(this.config),this.faucet=new wt(this.config),this.fungibleAsset=new St(this.config),this.general=new xt(this.config),this.staking=new Ut(this.config),this.transaction=new Pt(this.config),this.transactionSubmission=new Et(this.config),this.build=new It(this.config),this.sign=new Rt(this.config),this.simulate=new Re(this.config),this.submit=new ze(this.config)}};function N(n,t,e){Object.getOwnPropertyNames(t.prototype).forEach(r=>{let o=Object.getOwnPropertyDescriptor(t.prototype,r);o&&(o.value=function(...i){return this[e][r](...i)},Object.defineProperty(n.prototype,r,o))})}N(R,ut,"account");N(R,Ct,"ans");N(R,Tt,"coin");N(R,bt,"digitalAsset");N(R,_t,"event");N(R,wt,"faucet");N(R,St,"fungibleAsset");N(R,xt,"general");N(R,Ut,"staking");N(R,Pt,"transaction");N(R,Et,"transactionSubmission");N(R,It,"build");N(R,Rt,"sign");N(R,Re,"simulate");N(R,ze,"submit");exports.APTOS_BIP44_REGEX = Si; exports.APTOS_COIN = mr; exports.APTOS_HARDENED_REGEX = wi; exports.Account = ge; exports.AccountAddress = u; exports.AccountAuthenticator = D; exports.AccountAuthenticatorEd25519 = ye; exports.AccountAuthenticatorMultiEd25519 = zn; exports.AccountAuthenticatorMultiKey = dt; exports.AccountAuthenticatorSingleKey = oe; exports.AccountAuthenticatorVariant = or; exports.AddressInvalidReason = Ti; exports.AnyPublicKey = C; exports.AnyPublicKeyVariant = ir; exports.AnySignature = re; exports.AnySignatureVariant = sr; exports.Aptos = R; exports.AptosApiError = J; exports.AptosApiType = Nt; exports.AptosConfig = en; exports.AuthenticationKey = Y; exports.Bool = x; exports.CKDPriv = xr; exports.ChainId = He; exports.DEFAULT_MAX_GAS_AMOUNT = lr; exports.DEFAULT_NETWORK = pr; exports.DEFAULT_TXN_EXP_SEC_FROM_NOW = gr; exports.DEFAULT_TXN_TIMEOUT_SEC = Ot; exports.DeriveScheme = pi; exports.Deserializer = Tr; exports.Ed25519PrivateKey = de; exports.Ed25519PublicKey = b; exports.Ed25519Signature = v; exports.EntryFunction = nt; exports.EntryFunctionBytes = Dt; exports.FeePayerRawTransaction = he; exports.FixedBytes = we; exports.HARDENED_OFFSET = _r; exports.Hex = m; exports.HexInvalidReason = fi; exports.Identifier = S; exports.KeyType = xi; exports.MimeType = fn; exports.ModuleId = pt; exports.MoveAbility = ui; exports.MoveFunctionVisibility = ci; exports.MoveOption = Se; exports.MoveString = E; exports.MoveVector = T; exports.MultiAgentRawTransaction = Ae; exports.MultiEd25519PublicKey = j; exports.MultiEd25519Signature = Be; exports.MultiKey = Me; exports.MultiSig = ft; exports.MultisigTransactionPayload = At; exports.Network = kt; exports.NetworkToChainId = Tn; exports.NetworkToFaucetAPI = dr; exports.NetworkToIndexerAPI = hn; exports.NetworkToNetworkName = ls; exports.NetworkToNodeAPI = ur; exports.ParsingError = G; exports.PrivateKey = Ge; exports.ProcessorType = ke; exports.PublicKey = F; exports.RAW_TRANSACTION_SALT = yr; exports.RAW_TRANSACTION_WITH_DATA_SALT = bn; exports.RawTransaction = ae; exports.RawTransactionWithData = rn; exports.RoleType = di; exports.RotationProofChallenge = tn; exports.Script = yt; exports.ScriptTransactionArgumentVariants = st; exports.Secp256k1PrivateKey = pe; exports.Secp256k1PublicKey = X; exports.Secp256k1Signature = le; exports.Serializable = p; exports.Serializer = Q; exports.Signature = W; exports.SignedTransaction = Z; exports.SigningScheme = at; exports.SigningSchemeInput = ar; exports.StructTag = se; exports.TransactionAuthenticator = ie; exports.TransactionAuthenticatorEd25519 = qe; exports.TransactionAuthenticatorFeePayer = $e; exports.TransactionAuthenticatorMultiAgent = Ke; exports.TransactionAuthenticatorMultiEd25519 = kn; exports.TransactionAuthenticatorSingleSender = Le; exports.TransactionAuthenticatorVariant = rr; exports.TransactionPayload = Ie; exports.TransactionPayloadEntryFunction = gt; exports.TransactionPayloadMultisig = mt; exports.TransactionPayloadScript = lt; exports.TransactionPayloadVariants = tr; exports.TransactionResponseType = An; exports.TransactionVariants = nr; exports.TypeTag = U; exports.TypeTagAddress = Je; exports.TypeTagBool = Ve; exports.TypeTagGeneric = et; exports.TypeTagParserError = _; exports.TypeTagParserErrorType = Oi; exports.TypeTagReference = nn; exports.TypeTagSigner = Ee; exports.TypeTagStruct = fe; exports.TypeTagU128 = Ye; exports.TypeTagU16 = We; exports.TypeTagU256 = Ze; exports.TypeTagU32 = je; exports.TypeTagU64 = Xe; exports.TypeTagU8 = Qe; exports.TypeTagVariants = er; exports.TypeTagVector = tt; exports.U128 = H; exports.U16 = $; exports.U256 = V; exports.U32 = L; exports.U64 = P; exports.U8 = k; exports.aptosCoinStructTag = zd; exports.aptosRequest = zt; exports.buildTransaction = Ln; exports.convertArgument = To; exports.deriveKey = Sn; exports.deriveTransactionType = xo; exports.deserializeFromScriptArgument = zi; exports.ensureBoolean = wn; exports.fetchEntryFunctionAbi = ho; exports.findFirstNonSignerArg = fo; exports.generateMultiSignersSignedTransaction = Fi; exports.generateRawTransaction = Di; exports.generateSignedTransaction = So; exports.generateSignedTransactionForSimulation = _o; exports.generateTransactionPayload = pn; exports.generateTransactionPayloadWithABI = Mi; exports.get = gi; exports.getAptosFullNode = M; exports.getAuthenticatorForSimulation = dn; exports.getFunctionParts = $n; exports.getSigningMessage = qi; exports.isBcsAddress = cn; exports.isBcsBool = Nn; exports.isBcsFixedBytes = yo; exports.isBcsString = On; exports.isBcsU128 = Fn; exports.isBcsU16 = Bn; exports.isBcsU256 = qn; exports.isBcsU32 = Mn; exports.isBcsU64 = Dn; exports.isBcsU8 = Gn; exports.isBool = go; exports.isLargeNumber = an; exports.isNull = mo; exports.isNumber = sn; exports.isScriptDataInput = Kn; exports.isString = rt; exports.isValidBIP44Path = wr; exports.isValidHardenedPath = Sr; exports.mnemonicToSeed = Ft; exports.objectStructTag = Od; exports.optionStructTag = Nd; exports.outOfRangeErrorMessage = Ai; exports.paginateWithCursor = Ne; exports.parseTypeTag = ht; exports.post = _n; exports.postAptosFaucet = Ar; exports.postAptosFullNode = Oe; exports.postAptosIndexer = fr; exports.request = li; exports.sign = wo; exports.splitPath = vr; exports.standardizeTypeTags = Ao; exports.stringStructTag = kd; exports.throwTypeMismatch = w; exports.validateNumberInRange = ue;
//# sourceMappingURL=index.js.map